(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Coupon"],{"09e4":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.couponList.length&&"1"==t.currentIndex,expression:"couponList.length && currentIndex == '1'"}]},t._l(t.couponList,function(e,i){return n("div",{key:i,staticClass:"hollow-two-circles",on:{click:function(n){return t.toPage(e)}}},[n("p",{staticClass:"price-info"},[n("span",{staticClass:"money-icon"},[t._v("¥")]),n("span",{staticClass:"money"},[t._v(t._s(e.reductionAmount))])]),n("div",{staticClass:"coupon-info"},[n("div",[n("p",{staticClass:"name hiddenLine3"},[t._v(t._s(e.promotionName))]),"0"==e.fullAmount?n("p",{staticClass:"condition"},[t._v("无门槛使用")]):n("p",{staticClass:"condition hiddenLine1"},[t._v("满"+t._s(e.fullAmount)+"减"+t._s(e.reductionAmount))]),n("p",{staticClass:"validity"},[t._v(t._s(t.dateFormat(e.startTime,"yyyy.mm.dd"))+" - "+t._s(t.dateFormat(e.endTime,"yyyy.mm.dd")))])]),n("div",{staticClass:"btn"},[t._v("立即使用")])])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:t.prizeList.length&&"2"==t.currentIndex,expression:"prizeList.length && currentIndex == '2'"}]},t._l(t.prizeList,function(e,i){return n("div",{key:i,staticClass:"hollow-two-circles",on:{click:function(n){return t.toPage(e)}}},[n("p",{staticClass:"price-info"},[n("span",{staticClass:"prize-name"},[t._v(t._s(e.cjLevelName?e.cjLevelName:t.getlevel(e.level)))])]),n("div",{staticClass:"prizeList-info"},[n("div",[n("p",{staticClass:"activityName hiddenLine1"},[t._v(t._s(e.activityName))]),n("p",{staticClass:"name hiddenLine2"},[t._v(t._s(e.name))])]),t._m(0,!0)])])}),0)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"to-detail"},[n("span",[t._v("查看详情")]),n("span",{staticClass:"icon iconfont iconlist_right"})])}],o=n("62a2"),s=o["a"].dateFormat,r={props:{couponList:{type:Array,default:function(){return[]}},prizeList:{type:Array,default:function(){return[]}},currentIndex:{type:String,default:"1"}},data:function(){return{levelList:["一等奖","二等奖","三等奖","四等奖","五等奖","六等奖","七等奖","八等奖","九等奖","十等奖","十一等奖"]}},methods:{dateFormat:s,toPage:function(t){this.$emit("click",t)},getlevel:function(t){var e=1*t-1;return this.levelList[e]}}},c=r,u=(n("d022"),n("2877")),l=Object(u["a"])(c,i,a,!1,null,"9bd9df5c",null);e["a"]=l.exports},1777:function(t,e,n){},"3b2b":function(t,e,n){var i=n("7726"),a=n("5dbc"),o=n("86cc").f,s=n("9093").f,r=n("aae3"),c=n("0bfb"),u=i.RegExp,l=u,d=u.prototype,h=/a/g,g=/a/g,p=new u(h)!==h;if(n("9e1e")&&(!p||n("79e5")(function(){return g[n("2b4c")("match")]=!1,u(h)!=h||u(g)==g||"/a/i"!=u(h,"i")}))){u=function(t,e){var n=this instanceof u,i=r(t),o=void 0===e;return!n&&i&&t.constructor===u&&o?t:a(p?new l(i&&!o?t.source:t,e):l((i=t instanceof u)?t.source:t,i&&o?c.call(t):e),n?this:d,u)};for(var f=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=s(l),m=0;v.length>m;)f(v[m++]);d.constructor=u,u.prototype=d,n("2aba")(i,"RegExp",u)}n("7a56")("RegExp")},"62a2":function(t,e,n){"use strict";n("456d"),n("ac6a"),n("3b2b"),n("a481");e["a"]={dateFormat:function(t,e){var n=new Date,i="日一二三四五六";t&&n.setTime(t),e=e||"yyyy-mm-dd";var a={"m+":n.getMonth()+1,"d+":n.getDate(),"w+":i.charAt(n.getDay()),"h+":n.getHours(),"M+":n.getMinutes(),"s+":n.getSeconds()};return/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").slice(-RegExp.$1.length))),Object.keys(a).forEach(function(t){new RegExp("(".concat(t,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[t]:"00".concat(a[t]).slice((""+a[t]).length)))}),e}}},6619:function(t,e,n){},a70d:function(t,e,n){"use strict";var i=n("1777"),a=n.n(i);a.a},ac4a:function(t,e,n){},c4e2:function(t,e,n){"use strict";var i=n("6619"),a=n.n(i);a.a},c9ca:function(t,e,n){},d022:function(t,e,n){"use strict";var i=n("c9ca"),a=n.n(i);a.a},d33a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon-box"},[n("tab-bar",{attrs:{propsCurrentIndex:t.currentIndex},on:{changeCurrent:t.changeCurrent}}),n("div",{staticClass:"scroll-box"},[n("list",{attrs:{couponList:t.couponList,currentIndex:t.currentIndex,prizeList:t.prizeList},on:{click:t.toPage}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.getnoData.length&&t.loading,expression:"!getnoData.length && loading"}],staticClass:"no-data"},[n("img",{attrs:{src:t.getnoData.url,alt:""}}),n("p",{staticClass:"tip"},[t._v(t._s(t.getnoData.title))])])],1)],1)},a=[],o=n("cebc"),s=n("3243"),r=n("3911"),c=n("ac2d"),u=n("f121"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"tab-bar"},t._l(t.item,function(e,i){return n("li",{key:i,staticClass:"item",class:{active:i==t.currentIndex},on:{click:function(e){return t.changeCurrent(i)}}},[n("span",{staticClass:"name"},[t._v(t._s(e))])])}),0)},d=[],h={props:{propsCurrentIndex:{default:"1",type:String}},data:function(){return{currentIndex:this.propsCurrentIndex,item:{1:"优惠券",2:"奖品"}}},methods:{changeCurrent:function(t){this.currentIndex=t,this.$emit("changeCurrent",t)}}},g=h,p=(n("c4e2"),n("2877")),f=Object(p["a"])(g,l,d,!1,null,"05d2fa4a",null),v=f.exports,m=n("09e4"),I={data:function(){return{couponList:[],memberInfo:{},prizeList:[],noData:{1:{title:"暂无优惠券",url:"http://hhh.images.visitshanghai.com.cn/coupons@3x.png"},2:{title:"暂无奖品",url:"http://hhh.images.visitshanghai.com.cn/no_gift@2x.png"}},loading:!1,currentIndex:""}},components:{TabBar:v,List:m["a"]},computed:{getnoData:function(){var t=0;return"1"===this.currentIndex?t=this.couponList.length:"2"===this.currentIndex&&(t=this.prizeList.length),Object(o["a"])({},this.noData[this.currentIndex],{length:t})}},created:function(){var t=this;"2"===this.$route.query.type?this.currentIndex="2":this.currentIndex="1",c["a"].noCallAppLoginGetInfo(function(e,n){t.memberInfo=t.getMemberInfo(e),t.getlist(t.currentIndex)}),c["a"].setAppTitle({title:"我的优惠券"})},methods:{changeCurrent:function(t){this.currentIndex!==t&&(this.loading=!1,this.currentIndex=t,this.getlist(this.currentIndex))},getlist:function(t){"1"===t&&this.receivedList(),"2"===t&&this.getZhongJiangByUserId()},receivedList:function(){var t=this;s["a"].receivedList({openId:this.memberInfo.userId,status:"0",type:"2",bizSysCode:"100",preferentialChannel:"100"},{unencrypted:!0,doNotPullUpLogin:!0}).then(function(e){var n=e.infos;t.loading=!0,n&&n.length?t.couponList=n:t.couponList=[]}).catch(function(e){t.loading=!0,t.couponList=[]})},getZhongJiangByUserId:function(){var t=this;r["a"].getZhongJiangByUserId({userId:this.memberInfo.userId},{otherCode:!0}).then(function(e){t.loading=!0;var n=e.data;n&&n.length?t.prizeList=n:t.prizeList=[]}).catch(function(t){console.log(t)})},toPage:function(t){var e="",n=!0;if("100"===t.category)e=u["a"].ADMISSION_TICKET_URL;else if("1000000"===t.category){var i="/hotelbooking/hotel/index.html#/list?cityName=%E4%B8%8A%E6%B5%B7&country=0&cityCode=AR04567&type=2";e="".concat(u["a"].HOTEL_URL).concat(i)}else{if(!t.goUrl)return void c["a"].gotoHomePage();e="".concat(u["a"].ENV_URL).concat(t.goUrl)}c["a"].openNewWebView({url:e,isFitWindow:n})}}},L=I,x=(n("e54b"),Object(p["a"])(L,i,a,!1,null,"6531e7b8",null));e["default"]=x.exports},e54b:function(t,e,n){"use strict";var i=n("ac4a"),a=n.n(i);a.a},e686:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon-box"},[n("div",{staticClass:"scroll-box"},[n("list",{attrs:{couponList:t.couponList,currentIndex:t.currentIndex,prizeList:t.prizeList},on:{click:t.toPage}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.getnoData.length&&t.loading,expression:"!getnoData.length && loading"}],staticClass:"no-data"},[n("img",{attrs:{src:t.getnoData.url,alt:""}}),n("p",{staticClass:"tip"},[t._v(t._s(t.getnoData.title))])])],1)])},a=[],o=n("cebc"),s=n("3243"),r=n("3911"),c=n("ac2d"),u=n("f121"),l=n("09e4"),d={data:function(){return{couponList:[],memberInfo:{},prizeList:[],noData:{1:{title:"暂无优惠券",url:"http://hhh.images.visitshanghai.com.cn/coupons@3x.png"},2:{title:"暂无奖品",url:"http://hhh.images.visitshanghai.com.cn/no_gift@2x.png"}},loading:!1,currentIndex:""}},components:{List:l["a"]},computed:{getnoData:function(){var t=0;return"1"===this.currentIndex?t=this.couponList.length:"2"===this.currentIndex&&(t=this.prizeList.length),Object(o["a"])({},this.noData[this.currentIndex],{length:t})}},created:function(){var t=this;"2"===this.$route.query.type?this.currentIndex="2":this.currentIndex="1",this.getData(),c["a"].refreshPage(function(){t.getData()}),c["a"].setAppTitle({title:"1"===this.currentIndex?"我的优惠券":"我的奖品"})},methods:{getData:function(){var t=this;c["a"].noCallAppLoginGetInfo(function(e,n){n?(t.memberInfo=t.getMemberInfo(e),t.getlist(t.currentIndex)):t.login()})},login:function(){c["a"].callAppLogin(function(){})},getlist:function(t){"1"===t&&this.receivedList(),"2"===t&&this.getZhongJiangByUserId()},receivedList:function(){var t=this;s["a"].receivedList({openId:this.memberInfo.userId,status:"0",type:"2",bizSysCode:"100",preferentialChannel:"100"},{unencrypted:!0,doNotPullUpLogin:!0}).then(function(e){var n=e.infos;t.loading=!0,n&&n.length&&(t.couponList=n)}).catch(function(e){t.loading=!0})},getZhongJiangByUserId:function(){var t=this;r["a"].getZhongJiangByUserId({userId:this.memberInfo.userId},{otherCode:!0}).then(function(e){t.loading=!0;var n=e.data;n&&n.length&&(t.prizeList=n)}).catch(function(e){t.loading=!0,console.log(e)})},toPage:function(t){var e="",n=!0;if("100"===t.category)e=u["a"].ADMISSION_TICKET_URL;else if("1000000"===t.category){var i="/hotelbooking/hotel/index.html#/list?cityName=%E4%B8%8A%E6%B5%B7&country=0&cityCode=AR04567&type=2";e="".concat(u["a"].HOTEL_URL).concat(i)}else{if(!t.goUrl)return void c["a"].gotoHomePage();e="".concat(u["a"].ENV_URL).concat(t.goUrl)}c["a"].openNewWebView({url:e,isFitWindow:n})}}},h=d,g=(n("a70d"),n("2877")),p=Object(g["a"])(h,i,a,!1,null,"1e6de328",null);e["default"]=p.exports}}]);