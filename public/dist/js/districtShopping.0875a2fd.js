(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["districtShopping"],{"084a":function(t,e,n){},"0a49":function(t,e,n){var i=n("9b43"),r=n("626a"),a=n("4bf8"),o=n("9def"),c=n("cd1c");t.exports=function(t,e){var n=1==t,s=2==t,u=3==t,d=4==t,l=6==t,f=5==t||l,g=e||c;return function(e,c,p){for(var h,m,v=a(e),b=r(v),w=i(c,p,3),A=o(b.length),C=0,y=n?g(e,A):s?g(e,0):void 0;A>C;C++)if((f||C in b)&&(h=b[C],m=w(h,C,v),t))if(n)y[C]=m;else if(m)switch(t){case 3:return!0;case 5:return h;case 6:return C;case 2:y.push(h)}else if(d)return!1;return l?-1:u||d?d:y}}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"1ae8":function(t,e,n){"use strict";e["a"]={data:function(){return{distanceText:"距您"}}}},"3b74":function(t,e,n){"use strict";var i=n("c8d9"),r=n.n(i);r.a},"3f7c":function(t,e,n){"use strict";e["a"]={methods:{formatDistance:function(t){return t>1e3?"".concat(parseFloat((t/1e3).toFixed(1)),"km"):"".concat(parseInt(t),"m")}}}},"49a2":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"c",function(){return c});n("6762"),n("2fdb");var i=750,r=window.innerWidth*window.devicePixelRatio,a=r/i,o=function(t,e,n){if(!e)return t;var i=parseInt(e*a),r=0;n&&(r=parseInt(n*a));var o=t;return i&&(o=t.includes("?")?"".concat(t,"&imageView2/1/w/").concat(i):"".concat(t,"?imageView2/1/w/").concat(i)),r&&(o="".concat(o,"/h/").concat(r)),o},c=function(t,e,n){if(!e)return t;var i=parseInt(e*a),r=0;n&&(r=parseInt(n*a));var o=t;return i&&(o=t.includes("?")?"".concat(t,"&imageMogr2/thumbnail/").concat(i,"x"):"".concat(t,"?imageMogr2/thumbnail/").concat(i,"x")),r&&(o="".concat(o).concat(r)),o};e["b"]={methods:{clipImage:o,resizeImage:c}}},"4ef4":function(t,e,n){"use strict";var i=n("084a"),r=n.n(i);r.a},6419:function(t,e,n){"use strict";var i=n("ac2d"),r=n("ed08");e["a"]={methods:{viewDetail:function(t){var e=t.id,n=t.dis;e&&i["a"].openNewWebView({url:Object(r["d"])("/list-detail/".concat(e,"?dis=").concat(n)),isFitWindow:!1})}}}},"6a02":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[t._l(t.list,function(e,r){return i("div",{key:"item"+(e.id||r),staticClass:"item",class:{smallBg:t.smallBg,noborder:r===t.list.length-1},on:{click:function(n){return t.viewDetail(e)}}},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.url,expression:"item.url",arg:"background-image"}],staticClass:"item-bg"},[t.fields.video&&e[t.fields.video]?i("img",{staticClass:"video-icon",attrs:{src:n("ce106"),alt:""}}):t._e()]),i("div",{staticClass:"item-right"},[i("div",{staticClass:"item-title"},[t._v(t._s(e[t.fields.title]))]),t.fields.discount?i("div",{staticClass:"item-discount"},[t._v(t._s(t._f("discount")(e,t.showBlank)))]):t._e(),i("div",{staticClass:"item-desc"},[t._v(t._s(e[t.fields.desc]))]),i("div",{staticClass:"item-addr"},[i("div",[i("img",{staticClass:"icon-location",attrs:{src:n("7b7b"),alt:""}}),t._v(t._s(t.distanceText)+t._s(e[t.fields.distance]))]),t.showNav?i("div",{staticClass:"go-to",on:{click:function(n){return n.stopPropagation(),t.goToMap(e)}}},[i("div",{staticClass:"iconfont iconicon_nav"}),t._v("去这里")]):t._e()])])])}),i("div",{attrs:{id:"blank"}}),i("loading",{attrs:{reachBtm:t.reachBtm,list:t.list,isWaiting:t.isWaiting},on:{loadMore:t.loadMore}})],2)},r=[],a=n("1ae8"),o=n("6419"),c=n("8b3f"),s=n("f216"),u=n("c0c8"),d={name:"simple-list",props:{showNav:{type:Boolean,default:!1},showBlank:{type:Boolean,default:!1},list:Array,fields:{type:Object,default:function(){return{bg:"url",title:"title",desc:"desc",distance:"distance"}}},smallBg:Boolean,reachBtm:Boolean,isWaiting:Boolean},components:{loading:c["a"]},mixins:[a["a"],o["a"],s["a"],u["a"]],methods:{loadMore:function(){this.$emit("loadMore")}}},l=d,f=(n("4ef4"),n("2877")),g=Object(f["a"])(l,i,r,!1,null,"94aecbd6",null);e["a"]=g.exports},7514:function(t,e,n){"use strict";var i=n("5ca1"),r=n("0a49")(5),a="find",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"7b7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAAB2UlEQVQ4jZWVucrCQBSFTwZ3cAFxRxAsBO0EG0W00jfwIX0EW5fCXqwUxN3CxgWx8ecMRCaZ5FcPRMZ7z/0cTzJqvF6vF2za7/dYLBY4HA643++yGQqFkE6nUSwWkclk7COwgC6XC4bDIXa7nWZUlc1m0Ww2EQ6HddDpdMJgMMDj8fgXYioQCKDT6SCZTMqK4Mv1ev0JQtHLGc6+QaPRyBXCbHi5wThLeRjoZrPRTPl8HvV6/Z0D85tMJliv1xYfZ8kQy+VSgxQKBXS7XUuYXLPGnl1kCN5qVUIINBoN12zYo0cVGeJ2u1mK0WgUwWDQFcQeParIEHa63+93hbh5yBDxeNxSPJ/PH0F2Dxkil8tZis/nE/P53BXCHj2qyBClUgkej8fSmE6nWK1WGoQ19lRxlgx5RMbjseMu+EmpVEquj8cjttut5imXy/J5kyA+of1+X9vyJ/l8PvR6PXnu5C3jolqt/gShOMNZmGeNqlQqSCQSX0Po5YypN8gwDLRaLS14J9FDL2c0EBWLxVCr1T6C6KFXlbCbuF2ng2mKPfUrOe7IFLcdiUS0OmvsOckR5PV65c8ob68prllj72sQxQza7bYMlBfX9lxUOf4dqZrNZvKtUy5vAfgDyR67rdYND+UAAAAASUVORK5CYII="},"8b3f":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.reachBtm&&t.needScroll,expression:"reachBtm && needScroll"}],ref:"wrapper",attrs:{id:"loading"}},[t._v(t._s(t.isBrand?"持续更新中":"- 已经到底了 -"))])},r=[];n("c5f6");function a(t){var e=getComputedStyle(t)["overflow-y"];return"scroll"===e||"auto"===e?t:t===document.documentElement?document:a(t.parentNode)}var o={name:"list-loading",props:{reachBtm:Boolean,isWaiting:Boolean,isBrand:Boolean,distance:{type:Number,default:parseInt(window.innerHeight/3)}},data:function(){return{parent:null,needScroll:!1,noMoreText:"- 已经到底了 -",continue:"持续更新中",observerConfig:{attributes:!1,childList:!0,subtree:!0},observer:null,scrollObserver:null,scrollObserverConfig:{attributes:!0,childList:!1,subtree:!1}}},mounted:function(){this.parent=a(this.$refs.wrapper),this.parent.addEventListener("scroll",this.handleScroll),this.checkNeedScroll();var t={attributes:!1,childList:!0,subtree:!0},e=new MutationObserver(this.checkNeedScroll);e.observe(this.parent===document?document.body:this.parent,t),this.observer=e;var n={attributes:!0,childList:!1,subtree:!1};this.scrollObserver=new MutationObserver(this.checkScrollStatus),this.scrollObserver.observe(this.parent,n)},methods:{loadMore:function(t){this.$emit("loadMore",t)},handleScroll:function(){if(!this.reachBtm&&!this.isWaiting){var t=0,e=0,n=0;this.parent===document?(t=window.pageYOffset,e=document.documentElement.offsetHeight,n=window.innerHeight):(t=this.parent.scrollTop,e=this.parent.scrollHeight,n=this.parent.clientHeight),t>0&&t+n+this.distance>=e&&this.$emit("loadMore")}},checkNeedScroll:function(t){var e=this;this.$nextTick(function(){e.parent===document?e.needScroll=window.innerHeight<document.documentElement.offsetHeight:e.needScroll=e.parent.clientHeight<e.parent.scrollHeight})},checkScrollStatus:function(){if(this.parent!==document){var t=a(this.$refs.wrapper);t!==this.parent&&(this.unbind(),this.parent=t,this.parent.addEventListener("scroll",this.handleScroll),this.observer.observe(this.parent===document?document.body:this.parent,this.observerConfig),this.parent!==document&&this.scrollObserver.observe(this.parent,this.scrollObserverConfig))}},unbind:function(){this.parent.removeEventListener("scroll",this.handleScroll),this.observer.disconnect(),this.scrollObserver.disconnect()}},beforeDestroy:function(){this.unbind()}},c=o,s=(n("ce09"),n("2877")),u=Object(s["a"])(c,i,r,!1,null,"7cd3b10d",null);e["a"]=u.exports},a21f:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return c}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return u});var i=n("ac2d"),r=null;function a(t){var e=t.force,n=void 0!==e&&e,a=t.vm;return new Promise(function(t,e){if(r&&!n)t(r);else if(i["a"].sourceType())i["a"].gainLocation(function(n){var i=n.result;i&&i.gdLatitude&&i.gdLongitude?(r=i,t(i)):e(new Error("获取位置失败"))},a);else{var o={gdLatitude:"31.24916171",gdLongitude:"121.48789949"};t(o)}})}function o(){return new Promise(function(t,e){i["a"].getClientInfo(function(n){var i=n.msgCode,r=n.result;100===+i?(console.log("getDeviceIdgetDeviceId",r),t(r)):e(new Error("获取设备信息失败"))})})}function c(t){t.force;var e=t.vm;return new Promise(function(t,n){if(i["a"].sourceType())i["a"].gainNowLocation(function(e){var i=e.msgCode,a=e.result;100===i&&a&&a.gdLatitude&&a.gdLongitude?(r=a,t(a)):n(new Error("获取位置失败"))},e);else{var a={gdLatitude:"31.312764",gdLongitude:"121.393972"};t(a)}})}function s(t,e){}function u(){return Promise.resolve({gdLatitude:"31.24916171",gdLongitude:"121.48789949"})}},b1ce:function(t,e,n){},bc5a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"district-shopping"}},[n("div",{style:{backgroundImage:"url("+t.bgUrl+")"},attrs:{id:"header"}}),n("div",{attrs:{id:"main"}},[n("simpleList",{attrs:{list:t.list,smallBg:!0,reachBtm:t.reachBottom,isWaiting:t.isWaiting},on:{loadMore:t.getData}})],1)])},r=[],a=(n("ac6a"),n("7f7f"),n("7514"),n("ac2d")),o=n("d6a0"),c=n("a21f"),s=n("ffbe"),u=n("3f7c"),d=n("6a02"),l={name:"district-shopping",mixins:[s["a"],u["a"]],components:{simpleList:d["a"]},data:function(){var t=null;o["a"]?t=o["a"]:(t=localStorage.getItem(o["b"]),t=JSON.parse(t));var e="";if(t){var n=t,i=n.blocks;i.find(function(t){if("购物"===t.name)return e=t.categoryId,!0})}var r="http://hhh.images.visitshanghai.com.cn/app/shopping_header.jpg?imageView2/1/w/750/h/330";return{categoryId:e,bgUrl:r,list:[],start:0,isWaiting:!0,reachBottom:!1}},methods:{getData:function(){var t=this;this.isWaiting=!0,Object(c["b"])({vm:this}).then(function(e){var n={channel:1,city:4,language:7,categoryId:t.categoryId,offset:5,start:t.start,lat:e.gdLatitude,lon:e.gdLongitude};t.$axios.content.queryContentByOrganize(n).then(function(e){var n=e.code,i=e.data;if(0===+n){var r=i.result,a=i.totalRowNum;r.forEach(function(e){t.getImageList({item:e,width:180,height:180,clip:!0}),e.desc=e.address,e.distance=t.formatDistance(e.dis)}),t.start+=r.length,t.list=t.list.concat(r),t.reachBottom=t.list.length===a,t.isWaiting=!1}})})}},created:function(){a["a"].setAppTitle({title:"购物"}),this.getData()},mounted:function(){this.removeHeight()},beforeDestroy:function(){this.resetHeight()}},f=l,g=(n("3b74"),n("f225"),n("2877")),p=Object(g["a"])(f,i,r,!1,null,"7105fafe",null);e["default"]=p.exports},c0c8:function(t,e,n){"use strict";n("7f7f");var i=n("ac2d");e["a"]={methods:{goToMap:function(t){var e={lat:t.lat,lng:t.lon,chainName:t.title||t.name,address:t.address,routerType:t.dis&&t.dis>1e3?1:3};i["a"].openRouterMap(e)}}}},c0f5:function(t,e,n){},c8d9:function(t,e,n){},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},ce09:function(t,e,n){"use strict";var i=n("b1ce"),r=n.n(i);r.a},ce106:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAAWlBMVEUAAAD////x8fEKCgogICD8/Pz///9HcExGRka0tLT////j4+P///////////////+MjIzu7u7///+Xl5fNzc3////Gxsb///////9eXl7d3d14eHj///////9gh98DAAAAHXRSTlOA3PKCiPInAJTFxOX7dWACsO8FtdVQ0KyYnOGmhC0xhpgAAAM1SURBVFjDzZl/c7IwDMdTCrX80CooKJr3/zaftHKbbELTYm9P/tnddn4W802aNIWd14y67K+VEEXTFEJU1/1FGf+nwPN3tR8KtNbgy49i2KstYPUQTxxm47kvyfrzmE2/Eg8VBzaH6snsj7ccXiy/HfsnvTqYYHB7cM7WnYa3prvauX1ow8AOm5UL1IldZg4dAFY2CKdOgsdkd7IBUUxw+yDps6MX69BH8rp5tBywdbcpc2BaXjZvnf4FvlDa1hoCTJOMxcUH3lPQSglBJkv60H4dfKV/fodgu9PXvJplcDtQMmiIME3pMbRLYEPcOo/hgswp0INZAFMcxjiuJY8Ujbdgs4/295l39UzBb/CF4ruBS2SK8+U3WBVY6C1ckJoQ6ie4pXq7w0a7Uw22P8APqgvYbFQpjzlYNVjL7WBZY6Nm4AobDR8w3WD1Cj58JBBTMA7f4FZgln8GnGco2i8wOXyED9lxctmCjcCT/BRYnlCYCUwOd6vpOZ4DlO2eLoNLiWzFYSnpsC34oZKZSwwCK09KaDecnPOAxFAOTEWn/WDMbtxcduVHYIE1MMDUupkK1ygsWHmk+wKzu3dnYwG2L2smmKmhtic+7AbMgAtmapjhsANTYB8AZmnYY2FAect5DuZoSGWtgFrdLQjM0PBGzQ9IuzwQ7NUwJ/Xg6tPuDdirYYZXqHCMAHs0HLECgecY8LqGZxQE7qPAqxr2BC683W4JvKJhiQU08eDlzl5iswm8ODtZ8IZQLA+RNhTx4q0kc++yIi7dVsvPpltkgawfGLZA4krac8TZko45hPB08x9CEcemt424YzP4oGc0PnfQh7YmTqt2rSmwmbKGC9dMg9q/T7VZ+w8YWJgD3DSwsEcs9sg5jVjcoZC9HvkaCnljLHsk/B5jPYP3E3ziDrEvg7f3qjCGjN2vVwXf5Ube2e7OLzcm1XUs3QUy2ZU33SXdJFsrJFuEmGSrmw8sm+Dtsmn7ekwurMfcIjbJQs9sWkHC8gpy09IUVpemyda85HOixXTCVfrORC//zV89V6R7YLFnXZonofBHLMMHm1TPboRmPhSa/+dp88dj7Hyo3/gYu+X5+B9slq0PbUEvLQAAAABJRU5ErkJggg=="},d6a0:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"b",function(){return r}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return o}),n.d(e,"e",function(){return c});var i="district_search",r="district_active",a="district_video",o=null,c=function(t){o=t}},e853:function(t,e,n){var i=n("d3f4"),r=n("1169"),a=n("2b4c")("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"a",function(){return c}),n.d(e,"g",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return d}),n.d(e,"j",function(){return p}),n.d(e,"h",function(){return v}),n.d(e,"b",function(){return b}),n.d(e,"e",function(){return w}),n.d(e,"i",function(){return A});var i=n("f121"),r=n("f76d"),a=i["a"].ENV_URL,o=function(t){return"".concat(a,"/#").concat(t)},c=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function s(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function u(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var d={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},l=Object(r["a"])(),f="",g="";"iOS"===l?(f="https://itunes.apple.com/cn/app/id1395725438",g="saicpassenger://"):f="https://marketing.saicmobility.com/mis-h5/app-download";var p={appScheme:"saicpassenger://",downloadAppUrl:f,packageName:"com.saicmobility.user",otherAppPage:g},h="",m="";"iOS"===l?(h="https://apps.apple.com/cn/app/id732618720",m="shiminyun://"):h="http://m.eshimin.com/";var v={appScheme:"shiminyun://",downloadAppUrl:h,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:m},b=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],w=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],A=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=t.slice(0,17),r=t.slice(17,18);r=isNaN(parseInt(r))?r.toLowerCase():parseInt(r);for(var a=0,o=0;o<17;o++)a=(a+=parseInt(i.charAt(o))*n[o])%11;var c=[1,0,"X",9,8,7,6,5,4,3,2],s="X"===c[a]?c[a].toLowerCase():c[a];return r===s?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}},f216:function(t,e,n){"use strict";n("28a5"),n("a481");var i=n("7618");e["a"]={filters:{discount:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"===Object(i["a"])(t)){var r=t;e=r.products,t=t.priceRate}if(t&&t<10)return"".concat(t,"折");if(n){if(e&&e.length>0){var a=e[0],o=a.id,c=a.discountsDesc;return o&&c?"优惠":""}return""}return""},price:function(t){if(t)return t.replace("人均 ","￥")},shortContent1:function(t){if(t){var e=t.split("；");return e.length>0?e[0]:void 0}},shortContent2:function(t){if(t){var e=t.split("；");return e.length>1?e[1]:void 0}}},methods:{discount:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"===Object(i["a"])(t)){var r=t;e=r.products,t=t.priceRate}if(t&&t<10)return"".concat(t,"折");if(n){if(e&&e.length>0){var a=e[0],o=a.id,c=a.discountsDesc;return o&&c?"优惠":""}return""}return""},shortContent1:function(t){if(t){var e=t.split("；");return e.length>0?e[0]:void 0}},shortContent2:function(t){if(t){var e=t.split("；");return e.length>1?e[1]:void 0}}}}},f225:function(t,e,n){"use strict";var i=n("c0f5"),r=n.n(i);r.a},ffbe:function(t,e,n){"use strict";n.d(e,"b",function(){return r});n("7514");var i=n("49a2"),r={methods:{getVideoLink:function(t){var e=t.medias.find(function(t){return 2===+t.mediaType});return e?e.url:""}}};e["a"]={methods:{getImageList:function(t){var e=t.item,n=t.single,r=void 0===n||n,a=t.clip,o=void 0===a||a,c=t.width,s=t.height;if(r){var u=e.medias.find(function(t){return 1===+t.mediaType&&(e.imgUrl=e.url=o?Object(i["a"])(t.url,c,s):Object(i["c"])(t.url,c,s),!0)}),d=!!u;return d||console.warn("存在无图片条目",e),d}e.imageList=e.medias.filter(function(t){return 1===+t.mediaType&&(t.imgUrl=t.url=o?Object(i["a"])(t.url,c,s):Object(i["c"])(t.url,c,s),!0)});var l=e.imageList.length>0;return l||console.warn("存在无图片条目",e),l}}}}}]);