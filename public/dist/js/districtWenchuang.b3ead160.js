(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["districtWenchuang"],{"0713":function(t,e,i){},"13cf":function(t,e,i){},"2f21":function(t,e,i){"use strict";var n=i("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},"44de":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"district-wenchuang"}},[i("div",{style:{backgroundImage:"url("+t.bgUrl+")"},attrs:{id:"header"}}),i("div",{attrs:{id:"main"}},[i("flex-list",{attrs:{list:t.list,reachBtm:t.reachBtm,isWaiting:t.isWaiting},on:{loadMore:t.getData},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.data,s=e.index,r=e.imgLoaded;return i("div",{staticClass:"item",on:{click:function(e){return t.toDetail(n)}}},[i("div",{staticClass:"item-bg"},[i("img",{staticClass:"item-img",attrs:{src:n.img},on:{load:function(t){return r(s,t.target)}}})]),i("div",{staticClass:"item-btm"},[i("div",{staticClass:"item-title"},[t._v(t._s(n.title))]),n.price?i("div",{staticClass:"item-price"},[i("span",{staticClass:"p-symbol"},[t._v("￥")]),i("span",{staticClass:"p-num"},[t._v(t._s(n.price))])]):t._e()])])}}])})],1)])},s=[],r=(i("386d"),i("ac2d")),a=i("cd11"),o={name:"district-wenchuang",components:{flexList:a["a"]},data:function(){var t=this.$route.query.id,e="https://img-pub01.visitshanghai.com.cn/FvWw6TkNu-6yHN0VzsxklNSz8dQm?e=1573794984&token=JT9hop2MntCNMNz8O7UqTb4scQYpASy7sK2q11su:EdPPqfuuvMXGQhiy9NT_etxVduc=";return{id:t,bgUrl:e,page:1,size:10,list:[],start:0,isWaiting:!0,reachBtm:!1}},methods:{getData:function(){var t=this;this.isWaiting=!0;var e={keyword:"",appName:"BGSH_CHINA",size:this.size,innId:this.id,page:this.page++};this.$axios.search.queryStoreList(e,{hideLoading:this.page>0}).then(function(e){var i=e.code,n=e.data;0===+i&&(0!==n.length?(t.list=t.list.concat(n),t.reachBtm=!1):t.reachBtm=!0,t.isWaiting=!1)},function(){t.isWaiting=!1})},toDetail:function(t){var e=t.spreadUrl;e&&r["a"].openNewWebView({url:e,isFitWindow:!0})}},created:function(){r["a"].setAppTitle({title:"文创"}),this.getData()},mounted:function(){this.removeHeight()},beforeDestroy:function(){this.resetHeight()}},c=o,l=(i("9824"),i("8b7b"),i("2877")),d=Object(l["a"])(c,n,s,!1,null,"3f9852c9",null);e["default"]=d.exports},"55dd":function(t,e,i){"use strict";var n=i("5ca1"),s=i("d8e8"),r=i("4bf8"),a=i("79e5"),o=[].sort,c=[1,2,3];n(n.P+n.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!i("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(r(this)):o.call(r(this),s(t))}})},"82a4":function(t,e,i){},"8b3f":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.reachBtm&&t.needScroll,expression:"reachBtm && needScroll"}],ref:"wrapper",attrs:{id:"loading"}},[t._v(t._s(t.isBrand?"持续更新中":"- 已经到底了 -"))])},s=[];i("c5f6");function r(t){var e=getComputedStyle(t)["overflow-y"];return"scroll"===e||"auto"===e?t:t===document.documentElement?document:r(t.parentNode)}var a={name:"list-loading",props:{reachBtm:Boolean,isWaiting:Boolean,isBrand:Boolean,distance:{type:Number,default:parseInt(window.innerHeight/3)}},data:function(){return{parent:null,needScroll:!1,noMoreText:"- 已经到底了 -",continue:"持续更新中",observerConfig:{attributes:!1,childList:!0,subtree:!0},observer:null,scrollObserver:null,scrollObserverConfig:{attributes:!0,childList:!1,subtree:!1}}},mounted:function(){this.parent=r(this.$refs.wrapper),this.parent.addEventListener("scroll",this.handleScroll),this.checkNeedScroll();var t={attributes:!1,childList:!0,subtree:!0},e=new MutationObserver(this.checkNeedScroll);e.observe(this.parent===document?document.body:this.parent,t),this.observer=e;var i={attributes:!0,childList:!1,subtree:!1};this.scrollObserver=new MutationObserver(this.checkScrollStatus),this.scrollObserver.observe(this.parent,i)},methods:{loadMore:function(t){this.$emit("loadMore",t)},handleScroll:function(){if(!this.reachBtm&&!this.isWaiting){var t=0,e=0,i=0;this.parent===document?(t=window.pageYOffset,e=document.documentElement.offsetHeight,i=window.innerHeight):(t=this.parent.scrollTop,e=this.parent.scrollHeight,i=this.parent.clientHeight),t>0&&t+i+this.distance>=e&&this.$emit("loadMore")}},checkNeedScroll:function(t){var e=this;this.$nextTick(function(){e.parent===document?e.needScroll=window.innerHeight<document.documentElement.offsetHeight:e.needScroll=e.parent.clientHeight<e.parent.scrollHeight})},checkScrollStatus:function(){if(this.parent!==document){var t=r(this.$refs.wrapper);t!==this.parent&&(this.unbind(),this.parent=t,this.parent.addEventListener("scroll",this.handleScroll),this.observer.observe(this.parent===document?document.body:this.parent,this.observerConfig),this.parent!==document&&this.scrollObserver.observe(this.parent,this.scrollObserverConfig))}},unbind:function(){this.parent.removeEventListener("scroll",this.handleScroll),this.observer.disconnect(),this.scrollObserver.disconnect()}},beforeDestroy:function(){this.unbind()}},o=a,c=(i("ce09"),i("2877")),l=Object(c["a"])(o,n,s,!1,null,"7cd3b10d",null);e["a"]=l.exports},"8b7b":function(t,e,i){"use strict";var n=i("82a4"),s=i.n(n);s.a},9824:function(t,e,i){"use strict";var n=i("0713"),s=i.n(n);s.a},b1ce:function(t,e,i){},cced:function(t,e,i){"use strict";var n=i("13cf"),s=i.n(n);s.a},cd11:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"flex-list"}},[i("div",{attrs:{id:"wrapper"}},[i("div",{ref:"left",attrs:{id:"left"}}),i("div",{ref:"right",attrs:{id:"right"}})]),i("div",{ref:"clone",attrs:{id:"clone"}},t._l(t.list,function(e,n){return i("div",{key:"content"+n,ref:"item"+n,refInFor:!0},[t._t("default",null,{data:e,index:n,imgLoaded:t.imgLoaded})],2)}),0),t.needLoading?i("loading",{attrs:{list:t.list,reachBtm:t.allImageLoaded,isWaiting:t.isWaiting},on:{loadMore:t.loadMore}}):t._e()],1)},s=[],r=(i("55dd"),i("ac6a"),i("456d"),i("8b3f")),a={name:"flex-list",props:{needLoading:{type:Boolean,default:!0},list:Array,isWaiting:Boolean,reachBtm:Boolean,inOrder:{type:Boolean,default:!0}},components:{loading:r["a"]},computed:{allImageLoaded:function(){return this.reachBtm&&this.loadedCount===this.list.length}},data:function(){return{leftHeight:0,rightHeight:0,queue:{},appended:{},loadedCount:0}},methods:{imgLoaded:function(t,e){this.loadedCount++,this.inOrder?0===t?(this.append(t,e),this.checkQueue()):this.appended[t-1]?(this.append(t,e),this.checkQueue()):this.queue[t]=e:this.append(t,e)},append:function(t,e){delete this.queue[t],this.appended[t]=e,e.classList.add("loaded");var i=this.$refs.left,n=this.$refs.right,s=this.$refs["item"+t][0],r=s.offsetHeight;this.leftHeight>this.rightHeight?(this.rightHeight+=r,n.appendChild(s)):(this.leftHeight+=r,i.appendChild(s))},checkQueue:function(){var t=this,e=Object.keys(this.queue);e.sort(function(t,e){return t-e}),e.forEach(function(e){t.appended[e-1]&&t.append(e,t.queue[e])})},loadMore:function(){this.$emit("loadMore")}},watch:{list:function(t){0===t.length&&(this.loadedCount=0,this.leftHeight=0,this.rightHeight=0)}}},o=a,c=(i("cced"),i("2877")),l=Object(c["a"])(o,n,s,!1,null,"0e2e89b6",null);e["a"]=l.exports},ce09:function(t,e,i){"use strict";var n=i("b1ce"),s=i.n(n);s.a}}]);