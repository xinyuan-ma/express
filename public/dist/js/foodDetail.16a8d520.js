(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["foodDetail"],{"3cbb":function(t,e,a){"use strict";var o=a("50e7"),i=a.n(o);i.a},"50e7":function(t,e,a){},"6bde":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"order-list-page",style:{backgroundColor:!t.list.length||t.isShowEmpty?"#fff":""}},[t.list.length?o("div",{staticClass:"scroll-wrap"},[o("scroll",{ref:"scroll",attrs:{data:t.list,noMoreData:"- 已经到底了 -",noMore:t.noMore},on:{onPullingUp:t.pullingUp}},t._l(t.list,function(e){return o("div",{key:e.id,staticClass:"list-item",on:{click:function(a){return t.toPage(e.id)}}},[o("div",{staticClass:"info"},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumbnailUrl+"?imageView2/1/w/110/h/110",expression:"`${item.thumbnailUrl}?imageView2/1/w/110/h/110`"}],staticClass:"detail-img"}),o("div",{staticClass:"detail-info"},[o("div",{staticClass:"title"},[t._v(t._s(e.productName))]),o("div",{staticClass:"address"},[o("img",{attrs:{src:a("fd39")}}),o("div",{staticClass:"text"},[t._v(t._s(e.address))])])])]),o("div",{staticClass:"date-wrap"},[o("div",{staticClass:"date"},[o("span",[t._v(t._s(t.$t("orderList.bookTime")))]),o("span",[t._v(t._s(t.formatTime(e.createTime)))])]),o("div",{staticClass:"detail-btn"},[t._v(t._s(t.$t("orderList.toDetail")))])])])}),0)],1):t._e(),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.list.length&&t.isNoData,expression:"!list.length && isNoData"}],staticClass:"order-empty"},[o("img",{attrs:{src:a("ddde")}}),o("div",{staticClass:"tips"},[t._v(t._s(t.$t("orderList.empty")))])])])},i=[],s=a("75fc"),n=a("ac2d"),r=a("c936"),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{ref:"wrapper",staticClass:"scroll-wrapper"},[o("div",{staticClass:"scroll-content"},[t._t("default"),t._t("pullup",[t.hasMore?o("div",{staticClass:"pullup-wrapper"},[o("img",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],staticClass:"loading",attrs:{src:a("cf63")}}),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.hasMore&&t.data.length>0,expression:"!hasMore && data.length>0"}],staticClass:"no-more"},[t._v(t._s(t.noMoreData))])]):t._e(),t.noMore?o("div",{staticClass:"pullup-wrapper"},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.noMore&&t.data.length>0,expression:"noMore && data.length>0"}],staticClass:"no-more"},[t._v(t._s(t.noMoreData))])]):t._e()],{pullUpLoad:t.pullUpLoad,isPullUpLoad:t.isPullUpLoad,isNoMore:t.isNoMore})],2)])},d=[],c=(a("c5f6"),a("1fba")),u={props:{data:{type:Array,default:function(){return[]}},bounce:Boolean,pullUpLoad:{type:Boolean,default:!0},click:{type:Boolean,default:!0},probeType:{type:Number,default:1},refreshDelay:{type:Number,default:20},noMoreData:{type:String},hasMore:{type:Boolean},noMore:{type:Boolean},attachScroll:{type:Boolean,default:!1}},data:function(){return{isPullUpLoad:!1,isNoMore:!1}},methods:{initScroll:function(){var t=this;if(this.$refs.wrapper){var e={bounce:this.bounce,click:this.click,pullUpLoad:this.pullUpLoad,probeType:this.probeType};this.scroll=new c["a"](this.$refs.wrapper,e),this.pullUpLoad&&this.addEventPullUpLoad(),this.attachScroll&&this.scroll.on("scroll",function(e){Math.abs(e.y)>=100?t.$store.commit("SET_HEADER_BAR",!0):t.$store.commit("SET_HEADER_BAR",!1)})}},handlePullingUp:function(){this.isPullUpLoad=!0,this.$emit("onPullingUp")},addEventPullUpLoad:function(){this.scroll.on("pullingUp",this.handlePullingUp)},removeEventPullUpLoad:function(){this.scroll.off("pullingUp",this.handlePullingUp)},closePullUp:function(){this.isPullUpLoad=!1,this.isNoMore=!0,this.removeEventPullUpLoad()},forceUpdate:function(){this.pullUpLoad&&this.isPullUpLoad&&(this.isPullUpLoad=!1,this.scroll.finishPullUp()),this.refresh()},refresh:function(){this.scroll.refresh()}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},destroyed:function(){this.scroll.destroy()},watch:{data:function(){var t=this;setTimeout(function(){t.forceUpdate()},this.refreshDelay)}}},p=u,h=(a("3cbb"),a("2877")),m=Object(h["a"])(p,l,d,!1,null,"79ab8fb0",null),f=m.exports,v=a("f121"),g=a("ed08"),b=v["a"].HOTEL_URL,w=v["a"].MALL_URL,D=r["a"].getOrderList,L="".concat(b,"/hotelbooking/order/index.html"),y=[{name:"orderList.orderFood",category:"restaurant"},{name:"活动",category:"shopping",link:"".concat(w,"/#/orderList")},{name:"orderList.orderHotels",category:"hotel",link:"".concat(L,"#/orderList?type=2")},{name:"orderList.orderAttractions",category:"attractions",link:"https://www.yobab2b.com/h5/public/?userId=79076#/newmyorders"},{name:"orderList.orderTrips",category:"travel",link:"https://m.lvmama.com/webapp/my/orderList/#/vacationOrders"},{name:"自由行",category:"travelocity",link:"https://www.yobab2b.com/h5/common/orderList/?userId=79076#/routeOrderList"},{name:"高铁",category:"train",link:"https://m.lvmama.com/webapp/my/orderList/#/train"},{name:"机票",category:"flight",link:"https://m.lvmama.com/webapp/my/orderList/#/flight"},{name:"国际机票",category:"internationalFlight",link:"https://m.lvmama.com/webapp/my/orderList/#/internationalFlight"}],U={components:{Scroll:f},data:function(){return{tabList:y,currentIndex:0,category:"restaurant",list:[],start:0,offset:10,total:0,isShowEmpty:!1,isNoData:!1,noMore:!1}},mounted:function(){var t=this;setTimeout(function(){n["a"].setAppTitle({title:"美食订单"}),n["a"].noCallAppLoginGetInfo(function(e,a){setTimeout(function(){t.loadList()},100)})},200)},methods:{handleChangeTab:function(t,e,a){a?n["a"].openNewWebView({url:a,isFitWindow:!0}):(this.noMore=!1,this.isNoData=!1,this.currentIndex=t,this.category=e,this.list=[],this.loadList())},loadList:function(){var t=this;D({productType:"restaurant",start:this.start,offset:this.offset}).then(function(e){"0"===e.code&&e.data.result&&(t.list=[].concat(Object(s["a"])(t.list),Object(s["a"])(e.data.result)),t.total=e.data.totalRowNum,t.list.length>=t.total&&(t.noMore=!0)),t.isNoData=!0})},pullingUp:function(){this.list.length>=this.total?this.$refs.scroll.closePullUp():(this.start+=this.offset,this.loadList())},formatTime:function(t){if(!t)return"";var e=t?new Date(t):new Date;return"".concat(e.getFullYear(),".").concat(e.getMonth()+1,".").concat(e.getDate()," ").concat(this.padDate(e.getHours()),":").concat(this.padDate(e.getMinutes()),":").concat(this.padDate(e.getSeconds()))},padDate:function(t){return t<10?"0".concat(t):t},toPage:function(t){n["a"].openNewWebView({url:Object(g["d"])("/order-detail/".concat(t,"?from=order")),isFitWindow:!0})}}},A=U,T=(a("8388"),Object(h["a"])(A,o,i,!1,null,"09e1805a",null));e["default"]=T.exports},"6fe3":function(t,e,a){"use strict";var o=a("bb65"),i=a.n(o);i.a},8388:function(t,e,a){"use strict";var o=a("b11b"),i=a.n(o);i.a},a2ce:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showBody?a("div",{staticClass:"food_detail"},[a("div",{staticClass:"body",class:{toBottom:!this.promoInfo}},[a("detail",{attrs:{data:t.detailData,headerImage:t.headerImage,type:t.type},on:{enjoyPromo:t.toDetail,token:t.getToken}})],1),this.promoInfo?a("div",{staticClass:"btn-block",on:{touchmove:function(t){t.preventDefault()},click:t.toDetail}},[t._v("立享优惠")]):t._e()]):t._e()},i=[],s=(a("a481"),a("cebc")),n=a("90e9"),r=a("c936"),l=a("9135"),d=a("ac2d"),c=a("a21f"),u=a("ed08"),p=n["a"].queryContent,h={name:"food-detail",components:{Detail:l["a"]},data:function(){return{showBody:!1,id:this.$route.params.id,detailData:{title:""},location:{lat:"31.219452",lon:"121.459510"},type:"cms",promoInfo:null,headerImage:{list:[],originList:[],videoList:[]},token:""}},mounted:function(){var t=this;d["a"].sourceType()?Object(c["b"])({vm:this}).then(function(e){t.location.lat=e.gdLatitude,t.location.lon=e.gdLongitude,t.loadDetail()}):this.loadDetail()},methods:{getToken:function(t){this.token=t},loadDetail:function(){var t=this;p(Object(s["a"])({contentId:this.id},this.location)).then(function(e){t.detailData=e.data||{},null!=t.detailData.detailInfoHtml&&(t.detailData.detailInfoHtml=t.detailData.detailInfoHtml.replace(/<img/g,"<div></div><img")),t.detailData?t.noMore=!0:t.noMore=!1,t.detailData.productRes&&(t.promoInfo=t.detailData.productRes&&t.detailData.productRes.length>0?t.detailData.productRes[0]:null),t.detailData.medias&&(t.headerImage=t.getImgList(t.detailData.medias,750,500)),t.detailData.custerPrice&&(t.detailData.price=t.detailData.custerPrice.replace("人均 ","￥")),t.detailData.distance="",t.detailData.foodDiscountInfo=t.promoInfo,console.log(t.detailData),t.showBody=!0})},toDetail:function(){this.token?r["a"].addOrder({beginTime:new Date(this.promoInfo.beginTime),endTime:new Date(this.promoInfo.endTime),isOn:this.promoInfo.status,productDesc:this.promoInfo.productDesc,productId:this.promoInfo.id,productName:this.detailData.title,productType:this.promoInfo.productType,address:this.isZH?this.detailData.address:this.detailData.addressEn,telephone:this.detailData.iphoneNum,lat:this.detailData.lat,lon:this.detailData.lon,thumbnailUrl:this.headerImage.originList[0]}).then(function(t){d["a"].openNewWebView({url:Object(u["d"])("/order-detail/".concat(t.data.id,"?from=list-detail")),isFitWindow:!0})}):d["a"].callAppLogin()}}},m=h,f=(a("6fe3"),a("2877")),v=Object(f["a"])(m,o,i,!1,null,"c9b2a014",null);e["default"]=v.exports},b11b:function(t,e,a){},bb65:function(t,e,a){},c936:function(t,e,a){"use strict";var o=a("da80"),i=a("8742");e["a"]={addOrder:function(t){return Object(o["a"])({method:"POST",url:i["a"].order.addOrder,data:t})},getOrderDetail:function(t){return Object(o["a"])({method:"POST",url:i["a"].order.getOrder,data:t})},getOrderList:function(t){return Object(o["a"])({method:"POST",url:i["a"].order.getList,data:t})}}},ddde:function(t,e,a){t.exports=a.p+"img/no_order.6317e10a.png"},fd39:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGPC/xhBQAABVdJREFUaAXtmktoXFUYx2cmISShu2LHWtMuapCSZaWWxEkmyaqPjc2mWKUtLqLduOjCQkVBRHDhohsfq6ZQ+1h01WqRksnDpDihpUIJgqj4StOoy0bikJnx94U79M7l5J7HvXeQci9czuN7/f/fd3LPuTeTyaRXmoE0A2kG0gykGfjfZCDbKiSlUun5er2+I5fLbSfm017ch7Vabbmjo+OPQqHwQyuwJEZ4cXGxY2Vl5QAkDkH0IO0ODaGlbDb7FTpf5vP5m319fRWNvpM4dsJTU1PtVO0kaN7h3umEKpP5DbsPWA3nh4eH1x19KM1iJcyyHSXK51R0tzKa5SQV/wmT8ZGRkUlL003Vc5tKLAQQzE5OTp6h/ToushJefIlPz3csxYnsRJYwoK5wj1nkyFqVal/jPhp1iUeuMEQ/S5qsV+0xiWWdqYBBJMJU9ywgXg/4TGwosSRmlADOS3p2dnbf+vr6t4Bw9uECnGVdb29v3z84OLjgYu9UYSEJ2XMOZGWvvQzQj+X2+ks2wCPE3gjjVB2W1TH22oumQCE2zZ76brFY/EZlMz09XcDf+5ApquSqOXweY7u6pJKFzTkRZr+VpfximGNPVoXo2zxZpaLai0SehvhHKLbplCFchvB+nV5Qbk14Zmamp1qt/mq4nE+Njo5+GgwaNmbPfRP5J2E6IoNwva2tbdfQ0NDvOl2/3PpvmArI9qBNFICu2pIVYGIjtn6Qqr5gECwqWdicNWECFcIcerIaoM8Y6ClVPNuaUuibNMTis8hkrAljrXvrkeU2x9/tL02RLAZiKz4MTLRYgj6sCZPVZ4NOFGMTsAqzpqn5ppF6kDxh4j6ljv14luosPx659fDxQGdJ8rfpdIJy6wrj4O+gk+CYh8mW4Jzt2NDHX7Z+rQmT+R91QdB5Tqejk+Oj10BH3petLmvCLKNbugjoHOa29t3wK7bchxrjzVp0tFiCttagyPz1oBPFOM9x8TXFvNGUZ5vXKRtiaXKjPUA0aXsDTkNluvtUssYcYJZ5q9nLW43VA4y3sO28mNylevJ1M+xa4JBicrxt8mFdYbHmfKw9+glggF8vl8tbmyKGDERXbAzIGmFQhXIijKMvuH9WOfTPAXzv6urqXV4Kiv55VV90RFdsVHL/HKtHHlaCwfpyWtISBYDH2TomTCMCsgSZK3x0n6GKG3ssS/6ZSqUyhOwoshFTX6ywE5zGLpjq+/WcCQMwB+nbtNZ/R34Atn2SU4ZsP632rK3y7bqk5bwsLwhv4LSqcpzQXFViupIVTM6ExZhMf0fwc9JvxSWxJGaUWJEIS2BAvMdt9RLuAlhiSCwXW79NZMJk/BFATvmdJtGXGBIrqu/IhAUAQG4ASLs3u4IV3xLD1d5vFwthcQio0zT3/c5j6t/3fMfiznlbUkXnA98e9tg7yLpVcoe5f9irX+BD3fcOtkqT2Cos3gUYh4K3lJEcJsVXnGQFQqwVbnDiu/UEB5LjjbFLyzK+wHfnEy62YTaxVrgRqKenZ5y+0/9+PB8Lno+Gy9jaRAj39vb+29XVdYQqPbRFKjZiKz5sbU30EyEsgfv7+5dY1mN0bX6cUhEbsTUB76KTGGEBwwv6bRo5bxtdPKTGPRsjfRelRAkLIAicZ5l+qAMnOhwuJnR6UeWJPKWDoFimWV4lL9K+EpTJGLKXIPsqbV0lj3Mu8Qp7hOr82OwkhEpB8DLnyRInK7FbQlgCyS/ruru7X6Z7T8bedU/mkvrVXSOIv23JkvYHnJ+f37a2trbxv6fOzs6XBgYG/vTLn8j+3NzcTrmfSHIpqTQDaQbSDKQZSDNgnoH/ACe93aT9S+jDAAAAAElFTkSuQmCC"}}]);