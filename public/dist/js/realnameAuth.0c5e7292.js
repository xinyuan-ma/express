(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["realnameAuth"],{"004db":function(t,e,n){"use strict";var a=n("44a8"),i=n.n(a);i.a},"0795":function(t,e,n){},"0825":function(t,e,n){"use strict";var a=n("0795"),i=n.n(a);i.a},1100:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-realname"},[n("div",{staticClass:"realname-top"},[t._m(0),n("div",{staticClass:"complete-user"},[n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("真实姓名")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入姓名",name:"realname"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)]),n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("身份证号")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入身份证号",name:"idCard"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)])])]),n("nButton",{staticClass:"next-btn",attrs:{btns:t.buttons}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"realname-title"},[n("h1",[t._v("进行实名认证")]),n("p",[t._v("上海地铁乘车码")])])}],r=(n("ac6a"),n("456d"),n("7f7f"),n("ac2d")),o=n("8738"),s=n("ed08"),u=n("1471"),c=n("4e3c"),l={name:"realnameAuth",components:{nInput:u["a"],nButton:c["a"]},data:function(){var t=this;return{formData:{realname:"",idCard:""},buttons:[{text:"下一步",disabled:!0,style:"primary",eventHandler:function(){t.nextStep()}}],idType:0,token:"",isActive:!1}},created:function(){var t=this;r["a"].noCallAppLoginGetInfo(function(e,n){t.token=n})},mounted:function(){r["a"].setAppTitle({title:"实名认证"})},watch:{isActive:function(t){this.buttons[0].disabled=!t}},methods:{inputHandler:function(t){var e=this;this.formData[t.name]=t.value,this.isActive=Object.keys(this.formData).every(function(t){return!!e.formData[t]})},inputBlur:function(){document.querySelector("#app").scrollIntoView(!0)},inputClearHandler:function(t){this.formData[t]="",this.isActive=!1},nextStep:function(){var t=Object(s["i"])(this.formData.idCard);t.msg!==this.formData.idCard?this.$toast({content:t.msg,duration:1500}):this.submitForm()},submitForm:function(){var t=this;r["a"].showLoading(),r["a"].sourceType()?(console.log("app"),o["a"].realname.identityInfo({realName:this.formData.realname,idNum:this.formData.idCard,idType:this.idType,token:this.token},{hideloading:!0}).then(function(e){console.log(e);var n=e.result;1*e.code===0&&n.identityFlag?r["a"].openNewWebView({url:Object(s["d"])("/openMetro"),isFitWindow:!0}):t.$toast({content:e.message,duration:1500})}).catch(function(e){e?t.$toast({content:e.msg||"服务失败",duration:3e3}):t.$toast({content:"暂时无法获取网络，请检查您的网络设置。",duration:3e3})})):(console.log("web"),o["a"].realname.identityInfo({realName:this.formData.realname,idNum:this.formData.idCard,idType:this.idType}).then(function(e){console.log(e);var n=e.result;1*e.code===0&&n.identityFlag?t.$router.push("/openMetro"):t.$toast({content:e.message,duration:3e3})}).catch(function(e){console.log(e),t.$toast({content:"验证失败",duration:1500})}))}}},p=l,d=(n("004db"),n("2877")),m=Object(d["a"])(p,a,i,!1,null,"243b5ee0",null);e["default"]=m.exports},1471:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input-cls",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.inputValue},on:{blur:function(e){return t.inputShowClear(1)},focus:function(e){return t.inputShowClear(2)},input:[function(e){e.target.composing||(t.inputValue=e.target.value)},function(e){return t.inputChange(e,t.name)}]}}),t.isShowClear?n("i",{directives:[{name:"show",rawName:"v-show",value:t.showClear,expression:"showClear"}],staticClass:"clear iconfont iconicon_delete",on:{click:function(e){return t.clearInputValue(t.name)}}}):t._e()])},i=[],r=(n("a481"),{props:{isShowClear:{type:Boolean,default:!0},selectValue:{type:String},placeholder:{type:String,default:""},name:{type:String}},name:"InputComponent",data:function(){return{showClear:0,inputValue:""}},methods:{inputShowClear:function(t){var e=this,n=0;2===t?n=this.inputValue?1:0:this.$emit("inputBlur"),setTimeout(function(){e.showClear=n},10)},inputChange:function(t,e){var n=this,a=t.target.value.replace(/\s+/g,"");clearTimeout(this.timer),this.timer=setTimeout(function(){n.inputValue=a,n.showClear=a?1:0,n.$emit("inputHandler",{name:e,value:n.inputValue})},100)},clearInputValue:function(t){this.inputValue="",this.showClear=0,this.$emit("inputClearHandler",t)}}}),o=r,s=(n("0825"),n("2877")),u=Object(s["a"])(o,a,i,!1,null,"7904d7e8",null);e["a"]=u.exports},4307:function(t,e,n){},"44a8":function(t,e,n){},"4e3c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-group clearfix"},[t._l(t.btns,function(e,a){return[n("button",{key:a,staticClass:"submit-btn",class:{cancel:"default"==e.style,disabled:e.disabled},style:{"background-color":e.bgColor},on:{click:e.eventHandler}},[t._v("\n\t\t\t"+t._s(e.text)+"\n\t\t")])]})],2)},i=[],r={name:"index",data:function(){return{}},props:{btns:{type:Array,default:function(){return[]}}}},o=r,s=(n("6f9f"),n("2877")),u=Object(s["a"])(o,a,i,!1,null,"4180dcc7",null);e["a"]=u.exports},"6f9f":function(t,e,n){"use strict";var a=n("4307"),i=n.n(a);i.a},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"j",function(){return f}),n.d(e,"h",function(){return g}),n.d(e,"b",function(){return w}),n.d(e,"e",function(){return C}),n.d(e,"i",function(){return b});var a=n("f121"),i=n("f76d"),r=a["a"].ENV_URL,o=function(t){return"".concat(r,"/#").concat(t)},s=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function u(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function c(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var l={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},p=Object(i["a"])(),d="",m="";"iOS"===p?(d="https://itunes.apple.com/cn/app/id1395725438",m="saicpassenger://"):d="https://marketing.saicmobility.com/mis-h5/app-download";var f={appScheme:"saicpassenger://",downloadAppUrl:d,packageName:"com.saicmobility.user",otherAppPage:m},h="",v="";"iOS"===p?(h="https://apps.apple.com/cn/app/id732618720",v="shiminyun://"):h="http://m.eshimin.com/";var g={appScheme:"shiminyun://",downloadAppUrl:h,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:v},w=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],C=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],b=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=t.slice(0,17),i=t.slice(17,18);i=isNaN(parseInt(i))?i.toLowerCase():parseInt(i);for(var r=0,o=0;o<17;o++)r=(r+=parseInt(a.charAt(o))*n[o])%11;var s=[1,0,"X",9,8,7,6,5,4,3,2],u="X"===s[r]?s[r].toLowerCase():s[r];return i===u?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}}}]);