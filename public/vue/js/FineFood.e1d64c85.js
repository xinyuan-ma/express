(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["FineFood"],{"0a49":function(t,e,i){var n=i("9b43"),o=i("626a"),s=i("4bf8"),a=i("9def"),r=i("cd1c");t.exports=function(t,e){var i=1==t,c=2==t,l=3==t,d=4==t,u=6==t,f=5==t||u,h=e||r;return function(e,r,v){for(var p,g,m=s(e),y=o(m),b=n(r,v,3),x=a(y.length),w=0,T=i?h(e,x):c?h(e,0):void 0;x>w;w++)if((f||w in y)&&(p=y[w],g=b(p,w,m),t))if(i)T[w]=g;else if(g)switch(t){case 3:return!0;case 5:return p;case 6:return w;case 2:T.push(p)}else if(d)return!1;return u?-1:l||d?d:T}}},1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"1ae8":function(t,e,i){"use strict";e["a"]={data:function(){return{distanceText:"距您"}}}},"1af6":function(t,e,i){var n=i("63b6");n(n.S,"Array",{isArray:i("9003")})},"1c4c":function(t,e,i){"use strict";var n=i("9b43"),o=i("5ca1"),s=i("4bf8"),a=i("1fa8"),r=i("33a4"),c=i("9def"),l=i("f1ae"),d=i("27ee");o(o.S+o.F*!i("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,o,u,f=s(t),h="function"==typeof this?this:Array,v=arguments.length,p=v>1?arguments[1]:void 0,g=void 0!==p,m=0,y=d(f);if(g&&(p=n(p,v>2?arguments[2]:void 0,2)),void 0==y||h==Array&&r(y))for(e=c(f.length),i=new h(e);e>m;m++)l(i,m,g?p(f[m],m):f[m]);else for(u=y.call(f),i=new h;!(o=u.next()).done;m++)l(i,m,g?a(u,p,[o.value,m],!0):o.value);return i.length=m,i}})},"28d4":function(t,e,i){"use strict";var n=i("f706"),o=i.n(n);o.a},"2d85":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("CultureTemplate",{ref:"wrapper",staticClass:"fine-food",attrs:{title:t.title,bgUrl:t.bgUrl,detailUrl:t.detailUrl,isGoTop:!0}},[i("div",{staticClass:"topTitle",attrs:{slot:"topTitle"},slot:"topTitle"},[t._v("甄选美味")]),i("SwitchTitle",{attrs:{slot:"switch",business:t.tabs},on:{changeTitle:t.changeTitle},slot:"switch"}),t.tabs[0].show?i("SpecialFood"):i("GoldMedalFood")],1)},o=[],s=i("ac2d"),a=i("fe54"),r=i("9299"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"special-food"}},[t._l(t.stores,function(e,o){return n("div",{key:"store"+o,staticClass:"store"},[n("div",{staticClass:"store-name single-line"},[t._v(t._s(e.title))]),n("div",{staticClass:"store-bottom"},[n("div",{staticClass:"store-addr item-addr single-line"},[n("img",{staticClass:"icon-location",attrs:{src:i("7b7b"),alt:""}}),t._v("\n\t\t\t\t"+t._s(t.distanceText)+t._s(e.distance)+" | "+t._s(e.address)+"\n\t\t\t")]),n("div",{staticClass:"store-nav"},[n("div",{staticClass:"iconfont iconicon_nav",on:{click:function(i){return t.goToMap(e)}}}),e.iphoneNum?n("div",{staticClass:"store-line"}):t._e(),e.iphoneNum?n("div",{staticClass:"iconfont iconicon_dianhua",on:{click:function(i){return t.dialNumber(e.iphoneNum)}}}):t._e()])]),n("div",{staticClass:"food-list-title"},[t._v("特色菜")]),n("div",{staticClass:"food-list"},t._l(e.specialFood,function(e,i){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.img,expression:"food.img",arg:"background-image"}],key:"food"+o+i,staticClass:"food",class:{last:2===i}},[n("div",{staticClass:"food-shadow"}),n("div",{staticClass:"food-name"},[t._v(t._s(e.name))])])}),0)])}),n("loading",{attrs:{isWaiting:t.isWaiting,reachBtm:t.reachBtm},on:{loadMore:t.getData}})],2)},l=[],d=(i("28a5"),i("ac6a"),i("a21f")),u=i("8b3f"),f=i("3f7c"),h=i("1ae8"),v=i("49a2"),p=i("c0c8"),g={name:"special-food",components:{loading:u["a"]},data:function(){var t="6-8";return{categoryId:t,disableDial:!1,stores:[],isWaiting:!1,startNum:0,reachBtm:!1}},mixins:[f["a"],h["a"],v["b"],p["a"]],methods:{dialNumber:function(t){this.disableDial||(this.disable(),s["a"].callPhone({phoneNumber:t}))},disable:function(){var t=this;this.disableDial=!0,setTimeout(function(){t.disableDial=!1},500)},getData:function(){var t=this;this.isWaiting||(this.isWaiting=!0,Object(d["b"])({vm:this}).then(function(e){var i={channel:1,city:4,language:7,categoryId:t.categoryId,offset:20,start:t.startNum,lat:e.gdLatitude,lon:e.gdLongitude,topFlag:!0};t.$axios.content.queryContentByOrganize(i,{hideLoading:!0}).then(function(e){var i=e.data,n=i.result,o=i.totalRowNum;n.forEach(function(e){e.distance=t.formatDistance(e.dis);var i=e.simpleInfo.split(/;|；/).filter(function(t){return t}),n=e.medias;e.specialFood=i.map(function(e,i){return{name:e,img:t.resizeImage(n[i].url,202,160)}})}),t.startNum+=n.length,t.stores=t.stores.concat(n),t.isWaiting=!1,t.reachBtm=o===t.stores.length},function(e){throw t.isWaiting=!1,e})},function(t){throw t}))}},created:function(){this.getData()}},m=g,y=(i("9d56"),i("2877")),b=Object(y["a"])(m,c,l,!1,null,"7866bbe4",null),x=b.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",attrs:{id:"gold-medal"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.types.length>0,expression:"types.length > 0"}],attrs:{id:"type-select-wrapper"}},[n("div",{ref:"type",attrs:{id:"type-select"},on:{scroll:t.handleScrollType}},t._l(t.types,function(e,i){return n("div",{key:"type"+i,staticClass:"type",class:{last:i===t.types.length-1,active:t.activeIndex===i},on:{click:function(e){return t.jumpTo(i)}}},[t._v(t._s(e))])}),0)]),n("div",{class:{visible:t.showFixedType},attrs:{id:"fixed-type-select-wrapper"}},[n("div",{ref:"fixedType",attrs:{id:"fixed-type-select"},on:{scroll:t.handleScrollFixedType}},t._l(t.types,function(e,i){return n("div",{key:"type"+i,staticClass:"type",class:{last:i===t.types.length-1,active:t.activeIndex===i},on:{click:function(e){return t.jumpTo(i)}}},[t._v(t._s(e))])}),0)]),t._l(t.foodData,function(e,o){return n("div",{key:"food"+o,staticClass:"food"},[n("div",{staticClass:"food-title"},[t._v(t._s(e.name))]),n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.imgUrl,expression:"food.imgUrl",arg:"background-image"}],staticClass:"food-img"}),t._l(e.conferenceList,function(s,a){return n("div",{key:"store-"+o+"-"+a,staticClass:"store",class:{last:a===e.conferenceList.length-1}},[n("div",{staticClass:"store-name"},[t._v(t._s(s.name))]),n("div",{staticClass:"store-addr item-info single-line"},[t._v(t._s(s.address))]),n("div",{staticClass:"store-bottom"},[n("div",{staticClass:"store-distance item-addr"},[n("img",{staticClass:"icon-location",attrs:{src:i("7b7b"),alt:""}}),t._v(t._s(t.distanceText)+t._s(s.distance)+"\n\t\t\t\t")]),n("div",{staticClass:"store-go",on:{click:function(e){return e.stopPropagation(),t.goToMap(s)}}},[n("div",{staticClass:"iconfont iconicon_nav"}),t._v("去这里")])])])})],2)}),n("loading",{attrs:{isWaiting:!1,reachBtm:t.reachBtm}})],2)},T=[],C=(i("7514"),i("768b")),A=(i("5df3"),i("1c4c"),i("7f7f"),{name:"gold-medal",mixins:[p["a"],f["a"],h["a"],v["b"]],components:{loading:u["a"]},data:function(){var t="6-7";return{reachBtm:!1,categoryId:t,startNum:0,showFixedType:!1,scrollResponsive:!0,foodData:[],scrollElement:null,positions:[],fixThreshold:0,tabHeight:0,activeIndex:0,typeMiddlePosition:0,storeItemHeight:0}},computed:{types:function(){return this.foodData.map(function(t){return t.name})}},methods:{getFood:function(){var t=this;return new Promise(function(e){Object(d["b"])({vm:t}).then(function(i){var n={channel:1,city:4,language:7,categoryId:t.categoryId,offset:20,start:0,lat:i.gdLatitude,lon:i.gdLongitude,topFlag:!0,isAll:!0};t.$axios.content.queryContentByOrganize(n,{hideLoading:!0}).then(function(t){var i=t.data.result;e(i)},function(t){throw t})},function(t){throw t})})},getStores:function(){var t=this;return new Promise(function(e){Object(d["b"])({vm:t}).then(function(i){var n={channel:1,city:4,language:7,categoryId:t.categoryId,offset:100,start:t.startNum,lat:i.gdLatitude,lon:i.gdLongitude,latFalg:!0};t.$axios.content.queryWholeCategoryData(n,{hideLoading:t.startNum>0}).then(function(i){var n=i.code,o=i.data;if(0===+n){var s=o.children;s.forEach(function(e){var i=e.conferenceList;i.forEach(function(e){e.distance=t.formatDistance(e.dis)})}),e(s)}})},function(t){throw t})})},jumpTo:function(t){var e=this;if(this.activeIndex!==t){this.scrollResponsive=!1,this.activeIndex=t,this.adjustTypeScroll(t);var i=this.positions[t]-this.tabHeight+1;this.smoothScroll({ele:this.scrollElement,initPosition:this.scrollElement.scrollTop,targetPosition:i}),setTimeout(function(){e.scrollResponsive=!0},300)}},smoothScroll:function(t){var e=this,i=t.ele,n=t.initPosition,o=t.targetPosition,s=t.duration,a=void 0===s?300:s,r=t.vertical,c=void 0===r||r,l=o-n,d=null,u=function t(s){if(d){var r=s-d,u=parseInt(e.easeOutQuad(r/a)*l)+n;c?i.scrollTop=u:i.scrollLeft=u,r<a?requestAnimationFrame(t):c?i.scrollTop=o:i.scrollLeft=o}else d=s,requestAnimationFrame(t)};requestAnimationFrame(u)},easeOutQuad:function(t){return 1-(1-t)*(1-t)},handleScroll:function(){var t=this.scrollElement.scrollTop;if(t>this.fixThreshold?this.showFixedType=!0:this.showFixedType=!1,this.scrollResponsive)for(var e=this.positions.length-1;e>=0;e--)if(t+this.tabHeight+this.storeItemHeight>this.positions[e]){e!==this.activeIndex&&this.adjustTypeScroll(e),this.activeIndex=e;break}},getPositions:function(){var t=this.scrollElement.scrollTop,e=this.$refs.wrapper.querySelectorAll(".food");this.positions=Array.from(e).map(function(e){return e.getBoundingClientRect().top+t}),this.tabHeight=this.positions[0]-this.fixThreshold},handleScrollType:function(){this.scrollResponsive&&!this.showFixedType&&(this.$refs.fixedType.scrollLeft=this.$refs.type.scrollLeft)},handleScrollFixedType:function(){this.scrollResponsive&&this.showFixedType&&(this.$refs.type.scrollLeft=this.$refs.fixedType.scrollLeft)},adjustTypeScroll:function(t){var e=this.$refs.type.children[t],i=this.$refs.type.scrollLeft,n=e.offsetLeft-i,o=n-(this.typeMiddlePosition-e.offsetWidth/2),s=o+i;this.smoothScroll({ele:this.$refs.type,initPosition:i,targetPosition:s,vertical:!1}),this.smoothScroll({ele:this.$refs.fixedType,initPosition:i,targetPosition:s,vertical:!1})},getMiddlePosition:function(){var t=this.$refs.type;this.typeMiddlePosition=t.offsetWidth/2},getStoreItemHeight:function(){var t=this.$refs.wrapper.querySelector(".store");this.storeItemHeight=t.offsetHeight}},mounted:function(){var t=this;Promise.all([this.getFood(),this.getStores()]).then(function(e){var i=Object(C["a"])(e,2),n=i[0],o=i[1];o.forEach(function(e){var i=n.find(function(t){return+t.organizeId===+e.id}).cover;e.imgUrl=t.resizeImage(i,630,280)}),t.foodData=o,t.reachBtm=!0,t.$nextTick(function(){t.getMiddlePosition(),t.getPositions(),t.getStoreItemHeight()})}),this.scrollElement=document.querySelector("#scroll"),this.scrollElement.addEventListener("scroll",this.handleScroll),this.fixThreshold=document.querySelector("#bg").offsetHeight;var e=this.scrollElement.scrollTop;e>this.fixThreshold?this.showFixedType=!0:this.showFixedType=!1},beforeDestroy:function(){this.scrollElement.removeEventListener("scroll",this.handleScroll)}}),I=A,_=(i("28d4"),Object(y["a"])(I,w,T,!1,null,"535da097",null)),F=_.exports,S=i("ed08"),P={name:"fine-food",components:{CultureTemplate:a["a"],SwitchTitle:r["a"],SpecialFood:x,GoldMedalFood:F},data:function(){var t="美食",e="http://hhh.images.visitshanghai.com.cn/app/newFoodTop.jpg?imageView2/1/w/750/h/330",i=Object(S["d"])("/list-detail/1655");return{title:t,bgUrl:e,detailUrl:i,bannerVideo:{title:"甄选美味",imgUrl:"http://hhh.images.visitshanghai.com.cn/app/newFoodTop.jpg?imageView2/1/w/750/h/330",isVideo:!1,videoUrl:Object(S["d"])("/list-detail/1655")},tabs:[{title:"特色美食",show:!0},{title:"金牌小吃",show:!1}]}},methods:{changeTitle:function(t){this.tabs[0].show=this.tabs[1].show=!1,this.tabs[t].show=!0,this.$refs.wrapper.changePosition()}},created:function(){s["a"].setAppTitle({title:this.title})}},E=P,k=Object(y["a"])(E,n,o,!1,null,null,null);e["default"]=k.exports},"3f7c":function(t,e,i){"use strict";e["a"]={methods:{formatDistance:function(t){return t>1e3?"".concat(parseFloat((t/1e3).toFixed(1)),"km"):"".concat(parseInt(t),"m")}}}},"40c3":function(t,e,i){var n=i("6b4c"),o=i("5168")("toStringTag"),s="Arguments"==n(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=a(e=Object(t),o))?i:s?n(e):"Object"==(r=n(e))&&"function"==typeof e.callee?"Arguments":r}},"469f":function(t,e,i){i("6c1c"),i("1654"),t.exports=i("7d7b")},"49a2":function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"c",function(){return r});i("6762"),i("2fdb");var n=750,o=window.innerWidth*window.devicePixelRatio,s=o/n,a=function(t,e,i){if(!e)return t;var n=parseInt(e*s),o=0;i&&(o=parseInt(i*s));var a=t;return n&&(a=t.includes("?")?"".concat(t,"&imageView2/1/w/").concat(n):"".concat(t,"?imageView2/1/w/").concat(n)),o&&(a="".concat(a,"/h/").concat(o)),a},r=function(t,e,i){if(!e)return t;var n=parseInt(e*s),o=0;i&&(o=parseInt(i*s));var a=t;return n&&(a=t.includes("?")?"".concat(t,"&imageMogr2/thumbnail/").concat(n,"x"):"".concat(t,"?imageMogr2/thumbnail/").concat(n,"x")),o&&(a="".concat(a).concat(o)),a};e["b"]={methods:{clipImage:a,resizeImage:r}}},"5d73":function(t,e,i){t.exports=i("469f")},7514:function(t,e,i){"use strict";var n=i("5ca1"),o=i("0a49")(5),s="find",a=!0;s in[]&&Array(1)[s](function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(s)},"768b":function(t,e,i){"use strict";var n=i("a745"),o=i.n(n);function s(t){if(o()(t))return t}var a=i("5d73"),r=i.n(a);function c(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var a,c=r()(t);!(n=(a=c.next()).done);n=!0)if(i.push(a.value),e&&i.length===e)break}catch(l){o=!0,s=l}finally{try{n||null==c["return"]||c["return"]()}finally{if(o)throw s}}return i}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,e){return s(t)||c(t,e)||l()}i.d(e,"a",function(){return d})},"7b7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAAB2UlEQVQ4jZWVucrCQBSFTwZ3cAFxRxAsBO0EG0W00jfwIX0EW5fCXqwUxN3CxgWx8ecMRCaZ5FcPRMZ7z/0cTzJqvF6vF2za7/dYLBY4HA643++yGQqFkE6nUSwWkclk7COwgC6XC4bDIXa7nWZUlc1m0Ww2EQ6HddDpdMJgMMDj8fgXYioQCKDT6SCZTMqK4Mv1ev0JQtHLGc6+QaPRyBXCbHi5wThLeRjoZrPRTPl8HvV6/Z0D85tMJliv1xYfZ8kQy+VSgxQKBXS7XUuYXLPGnl1kCN5qVUIINBoN12zYo0cVGeJ2u1mK0WgUwWDQFcQeParIEHa63+93hbh5yBDxeNxSPJ/PH0F2Dxkil8tZis/nE/P53BXCHj2qyBClUgkej8fSmE6nWK1WGoQ19lRxlgx5RMbjseMu+EmpVEquj8cjttut5imXy/J5kyA+of1+X9vyJ/l8PvR6PXnu5C3jolqt/gShOMNZmGeNqlQqSCQSX0Po5YypN8gwDLRaLS14J9FDL2c0EBWLxVCr1T6C6KFXlbCbuF2ng2mKPfUrOe7IFLcdiUS0OmvsOckR5PV65c8ob68prllj72sQxQza7bYMlBfX9lxUOf4dqZrNZvKtUy5vAfgDyR67rdYND+UAAAAASUVORK5CYII="},"7cd6":function(t,e,i){var n=i("40c3"),o=i("5168")("iterator"),s=i("481b");t.exports=i("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||s[n(t)]}},"7d7b":function(t,e,i){var n=i("e4ae"),o=i("7cd6");t.exports=i("584a").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},9299:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discount flex-around"},t._l(t.business,function(e,n){return i("div",{key:n,class:{active:e.show},on:{click:function(e){return t.change(n)}}},[i("p",{staticClass:"text-overflow"},[t._v(t._s(e.title))])])}),0)},o=[],s=(i("ac6a"),{props:["business"],data:function(){return{currentIndex:0}},methods:{change:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.business.forEach(function(t){t.show=!1}),this.business[t].show=!0,this.$emit("changeTitle",t))}}}),a=s,r=(i("c57e"),i("2877")),c=Object(r["a"])(a,n,o,!1,null,"0ee3beb6",null);e["a"]=c.exports},"9d56":function(t,e,i){"use strict";var n=i("e7b7"),o=i.n(n);o.a},a745:function(t,e,i){t.exports=i("f410")},c0c8:function(t,e,i){"use strict";i("7f7f");var n=i("ac2d");e["a"]={methods:{goToMap:function(t){var e={lat:t.lat,lng:t.lon,chainName:t.title||t.name,address:t.address,routerType:t.dis&&t.dis>1e3?1:3};n["a"].openRouterMap(e)}}}},c57e:function(t,e,i){"use strict";var n=i("fd04"),o=i.n(n);o.a},cd1c:function(t,e,i){var n=i("e853");t.exports=function(t,e){return new(n(t))(e)}},e7b7:function(t,e,i){},e853:function(t,e,i){var n=i("d3f4"),o=i("1169"),s=i("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},f1ae:function(t,e,i){"use strict";var n=i("86cc"),o=i("4630");t.exports=function(t,e,i){e in t?n.f(t,e,o(0,i)):t[e]=i}},f410:function(t,e,i){i("1af6"),t.exports=i("584a").Array.isArray},f706:function(t,e,i){},fd04:function(t,e,i){}}]);