(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ResearchTour"],{"244d":function(t,e,n){"use strict";var s=n("d822"),i=n.n(s);i.a},"3c59":function(t,e,n){"use strict";var s=n("e1bb"),i=n.n(s);i.a},"69f4":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"emptyInfo",class:{isbrand:t.isbrand},style:{backgroundColor:t.bgColor}},[s("img",{attrs:{src:n("8711")}}),s("div",{staticClass:"tips"},[t._v(t._s(t.isZH?"暂无信息":"No information"))])])},i=[],o=(n("6762"),n("2fdb"),{name:"noMessage",props:{bgColor:{type:String,default:"#fff"}},computed:{isbrand:function(){return this.$route.path.includes("brand")}}}),a=o,r=(n("244d"),n("2877")),c=Object(r["a"])(a,s,i,!1,null,"17b9f0b2",null);e["a"]=c.exports},8711:function(t,e,n){t.exports=n.p+"img/no_message@3x.dace6754.png"},"8b3f":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.reachBtm&&t.needScroll,expression:"reachBtm && needScroll"}],ref:"wrapper",attrs:{id:"loading"}},[t._v(t._s(t.isBrand?"持续更新中":"- 已经到底了 -"))])},i=[];n("c5f6");function o(t){var e=getComputedStyle(t)["overflow-y"];return"scroll"===e||"auto"===e?t:t===document.documentElement?document:o(t.parentNode)}var a={name:"list-loading",props:{reachBtm:Boolean,isWaiting:Boolean,isBrand:Boolean,distance:{type:Number,default:parseInt(window.innerHeight/3)}},data:function(){return{parent:null,needScroll:!1,noMoreText:"- 已经到底了 -",continue:"持续更新中",observerConfig:{attributes:!1,childList:!0,subtree:!0},observer:null,scrollObserver:null,scrollObserverConfig:{attributes:!0,childList:!1,subtree:!1}}},mounted:function(){this.parent=o(this.$refs.wrapper),this.parent.addEventListener("scroll",this.handleScroll),this.checkNeedScroll();var t={attributes:!1,childList:!0,subtree:!0},e=new MutationObserver(this.checkNeedScroll);e.observe(this.parent===document?document.body:this.parent,t),this.observer=e;var n={attributes:!0,childList:!1,subtree:!1};this.scrollObserver=new MutationObserver(this.checkScrollStatus),this.scrollObserver.observe(this.parent,n)},methods:{loadMore:function(t){this.$emit("loadMore",t)},handleScroll:function(){if(!this.reachBtm&&!this.isWaiting){var t=0,e=0,n=0;this.parent===document?(t=window.pageYOffset,e=document.documentElement.offsetHeight,n=window.innerHeight):(t=this.parent.scrollTop,e=this.parent.scrollHeight,n=this.parent.clientHeight),t>0&&t+n+this.distance>=e&&this.$emit("loadMore")}},checkNeedScroll:function(t){var e=this;this.$nextTick(function(){e.parent===document?e.needScroll=window.innerHeight<document.documentElement.offsetHeight:e.needScroll=e.parent.clientHeight<e.parent.scrollHeight})},checkScrollStatus:function(){if(this.parent!==document){var t=o(this.$refs.wrapper);t!==this.parent&&(this.unbind(),this.parent=t,this.parent.addEventListener("scroll",this.handleScroll),this.observer.observe(this.parent===document?document.body:this.parent,this.observerConfig),this.parent!==document&&this.scrollObserver.observe(this.parent,this.scrollObserverConfig))}},unbind:function(){this.parent.removeEventListener("scroll",this.handleScroll),this.observer.disconnect(),this.scrollObserver.disconnect()}},beforeDestroy:function(){this.unbind()}},r=a,c=(n("ce09"),n("2877")),l=Object(c["a"])(r,s,i,!1,null,"7cd3b10d",null);e["a"]=l.exports},9299:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"discount flex-around"},t._l(t.business,function(e,s){return n("div",{key:s,class:{active:e.show},on:{click:function(e){return t.change(s)}}},[n("p",{staticClass:"text-overflow"},[t._v(t._s(e.title))])])}),0)},i=[],o=(n("ac6a"),{props:["business"],data:function(){return{currentIndex:0}},methods:{change:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.business.forEach(function(t){t.show=!1}),this.business[t].show=!0,this.$emit("changeTitle",t))}}}),a=o,r=(n("c57e"),n("2877")),c=Object(r["a"])(a,s,i,!1,null,"0ee3beb6",null);e["a"]=c.exports},b1ce:function(t,e,n){},b25b:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"research-tour",class:[{bgStyle:!t.listdata.length}]},[n("div",{staticClass:"top-banner"},[n("h5",{staticClass:"top-name"},[t._v("研学背景")]),n("div",{ref:"bannerContentBox",staticClass:"content-box"},[n("p",{ref:"bannerContentText",staticClass:"content-text"},[t._v("2019年市委相关部门，联合发布了《上海市文教结合三年行动计划（2019-2021年）》及《上海市文教结合2019年工作要点》。关于本市文教结合工作以习近平总书记关于宣传思想工作的重要思想和关于教育的重要论述为指导，聚焦落实习近平新时代中国特色社会主义思想进教材、进课堂、进头脑“三进”工作，着力推进全员、全过程、全方位“三全育人”，坚持把深化宣传文化和教育系统跨界融合、资源共享作为关键举措，发挥文教结合的制度机制优势，促进学生文化艺术素养提升、促进文化传承创新方面发挥更大作用。深入开展社会主义核心价值观和中华优秀传统文化传承弘扬及探索推进文化创意产教融合、校企合作为主要任务。")])]),n("p",{staticClass:"icon-box"},[n("i",{directives:[{name:"show",rawName:"v-show",value:t.isUp,expression:"isUp"}],staticClass:"iconfont iconup",on:{click:t.setbannerContentBoxH}}),n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isUp,expression:"!isUp"}],staticClass:"iconfont iconmore-down",on:{click:t.getMoreBannerContent}})])]),n("div",{staticClass:"bg_fff"},[n("div",{staticClass:"title-box",class:{"position-fixed":t.isSuctionTop}},[n("switchTitle",{attrs:{business:t.business},on:{changeTitle:t.changeTitle}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSuctionTop,expression:"isSuctionTop"}],staticClass:"position-place"})]),n("no-message",{directives:[{name:"show",rawName:"v-show",value:t.noMessage,expression:"noMessage"}]}),n("div",{staticClass:"content"},t._l(t.listdata,function(e){return n("div",{key:e.id,staticClass:"item",on:{click:function(n){return t.goDetail(e)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.selfCover,expression:"item.selfCover"}],staticClass:"img-bg",attrs:{src:""}}),n("div",{staticClass:"item-content"},[n("h5",{staticClass:"up"},[n("p",{staticClass:"name hiddenLine1"},[t._v(t._s(e.title))]),e.custerPrice?n("p",[n("span",{staticClass:"price"},[t._v(t._s(e.custerPrice))])]):t._e()]),e.address?n("p",{staticClass:"address"},[n("i",{staticClass:"iconfont iconicon_dingwei"}),t._v(t._s(e.address)+"\r\n\t\t\t\t")]):t._e()])])}),0),n("loading",{attrs:{reachBtm:t.noMore,isWaiting:t.isWaiting},on:{loadMore:t.getListData}})],1)},i=[],o=(n("28a5"),n("a481"),n("9299")),a=n("69f4"),r=n("ac2d"),c=n("ed08"),l=n("1b62"),u=n("8b3f"),d={name:"ResearchTour",mixins:[l["a"]],data:function(){return{business:[{title:"一日研学",categoryId:"c1-1",show:!0},{title:"单项课程",categoryId:"c1-2",show:!1}],isloading:!1,categoryId:"c1-1",noMessage:!1,location:{lat:"31.219452",lon:"121.459510"},offset:10,startNum:0,noMore:!1,listdata:[],researchTourEl:null,keepScrollTop:0,isSuctionTop:!1,originBannerContentBoxH:0,isUp:!1,reachBtm:!1,isWaiting:!0}},mounted:function(){var t=this;this.originBannerContentBoxH=this.$refs["bannerContentBox"].offsetHeight,this.researchTourEl=document.querySelector(".research-tour");var e=document.querySelector(".top-banner");this.researchTourEl.addEventListener("scroll",function(n){var s=e.offsetHeight,i=t.researchTourEl.scrollTop;i>=s?(t.isSuctionTop=!0,t.keepScrollTop=s):(t.isSuctionTop=!1,t.keepScrollTop=i)})},methods:{getMoreBannerContent:function(){var t=this;console.dir(this.$refs["bannerContentText"]);var e=this.$refs["bannerContentText"].offsetHeight;this.$refs["bannerContentBox"].style.height="".concat(e,"px"),this.$nextTick(function(){t.isUp=!0})},setbannerContentBoxH:function(){var t=this;this.$refs["bannerContentBox"].style.height="".concat(this.originBannerContentBoxH,"px"),this.$nextTick(function(){t.isUp=!1})},changeTitle:function(t){this.noMessage=!1,this.startNum=0,this.noMore=!1,this.isloading=!0,this.isSuctionTop&&(this.researchTourEl.scrollTop=this.keepScrollTop),this.categoryId=this.business[t].categoryId,this.getListData()},getListData:function(){var t=this;this.isWaiting=!0;var e={categoryId:this.categoryId,offset:10,start:this.startNum,lat:this.location.lat,lon:this.location.lon,topFlag:!0};this.$axios.content.queryContentByOrganize(e,{showLoading:this.isloading}).then(function(e){if(t.isWaiting=!1,e.data&&e.data.result&&e.data.result.length){var n=e.data.result.map(function(e){return e.selfCover=e.cover?t.imgCover(e.cover,690,280):"",e});t.listdata=0===t.startNum?n:t.listdata.concat(n),t.listdata.length>=e.data.totalRowNum?t.noMore=!0:t.startNum+=10}else t.listdata.length?t.noMore=!0:t.noMessage=!0}).catch(function(e){t.listdata.length?t.noMore=!0:t.noMessage=!0})},isOutlineLink:function(t){var e=t.replace(/\s*/g,""),n=e.split("："),s="驴妈妈一日研学";return n[0]===s?n[1]:""},goDetail:function(t){var e=this.isOutlineLink(t.simpleInfo);if(e){var n="https://m.lvmama.com/vacations/m/tour/".concat(e,"?lang=chn");r["a"].openNewWebView({url:n,isFitWindow:!1})}else r["a"].openNewWebView({url:Object(c["d"])("/list-detail/".concat(t.id,"?type=yanxuezixun")),isFitWindow:!1})}},created:function(){r["a"].setAppTitle({title:this.$t("研学实践")}),this.getListData()},components:{NoMessage:a["a"],SwitchTitle:o["a"],loading:u["a"]}},h=d,p=(n("3c59"),n("2877")),f=Object(p["a"])(h,s,i,!1,null,"643c22fd",null);e["default"]=f.exports},c57e:function(t,e,n){"use strict";var s=n("fd04"),i=n.n(s);i.a},ce09:function(t,e,n){"use strict";var s=n("b1ce"),i=n.n(s);i.a},d822:function(t,e,n){},e1bb:function(t,e,n){},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return a}),n.d(e,"a",function(){return r}),n.d(e,"g",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"f",function(){return u}),n.d(e,"j",function(){return f}),n.d(e,"h",function(){return g}),n.d(e,"b",function(){return b}),n.d(e,"e",function(){return w}),n.d(e,"i",function(){return C});var s=n("f121"),i=n("f76d"),o=s["a"].ENV_URL,a=function(t){return"".concat(o,"/#").concat(t)},r=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function c(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function l(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var u={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},d=Object(i["a"])(),h="",p="";"iOS"===d?(h="https://itunes.apple.com/cn/app/id1395725438",p="saicpassenger://"):h="https://marketing.saicmobility.com/mis-h5/app-download";var f={appScheme:"saicpassenger://",downloadAppUrl:h,packageName:"com.saicmobility.user",otherAppPage:p},m="",v="";"iOS"===d?(m="https://apps.apple.com/cn/app/id732618720",v="shiminyun://"):m="http://m.eshimin.com/";var g={appScheme:"shiminyun://",downloadAppUrl:m,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:v},b=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],w=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],C=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=t.slice(0,17),i=t.slice(17,18);i=isNaN(parseInt(i))?i.toLowerCase():parseInt(i);for(var o=0,a=0;a<17;a++)o=(o+=parseInt(s.charAt(a))*n[a])%11;var r=[1,0,"X",9,8,7,6,5,4,3,2],c="X"===r[o]?r[o].toLowerCase():r[o];return i===c?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}},fd04:function(t,e,n){}}]);