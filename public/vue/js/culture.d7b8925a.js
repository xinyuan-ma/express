(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["culture"],{"0337":function(t,e,i){"use strict";var n=i("c474"),a=i.n(n);a.a},"0a49":function(t,e,i){var n=i("9b43"),a=i("626a"),s=i("4bf8"),r=i("9def"),c=i("cd1c");t.exports=function(t,e){var i=1==t,o=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,g=e||c;return function(e,c,h){for(var m,p,v=s(e),b=a(v),w=n(c,h,3),A=r(b.length),y=0,C=i?g(e,A):o?g(e,0):void 0;A>y;y++)if((f||y in b)&&(m=b[y],p=w(m,y,v),t))if(i)C[y]=p;else if(p)switch(t){case 3:return!0;case 5:return m;case 6:return y;case 2:C.push(m)}else if(u)return!1;return d?-1:l||u?u:C}}},1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"13cf":function(t,e,i){},"17c4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("culture-template",{ref:"wrapper",staticClass:"culture",attrs:{nav:t.nav,bgUrl:t.bgUrl,videoUrl:t.videoUrl,needVideoIcon:!0,needBack:!1,isGoTop:!0}},[t.business[0].show?i("building"):i("performance"),i("div",{attrs:{slot:"topTitle"},slot:"topTitle"},[t._v("人文上海")]),i("switchTitle",{attrs:{slot:"switch",business:t.business},on:{changeTitle:t.changeTitle},slot:"switch"})],1)},a=[],s=i("fe54"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"building"}},[n("div",{attrs:{id:"wrapper"}},[n("flex-list",{attrs:{list:t.data,reachBtm:t.reachBtm,isWaiting:t.isWaiting},on:{loadMore:t.getData},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data,s=e.index,r=e.imgLoaded;return n("div",{staticClass:"item",on:{click:function(e){return t.toDetail(a)}}},[n("div",{staticClass:"item-bg"},[n("img",{staticClass:"item-img",attrs:{src:a.imgUrl,alt:""},on:{load:function(t){return r(s,t.target)}}})]),n("div",{staticClass:"item-btm"},[n("div",{staticClass:"item-title"},[t._v(t._s(a.title))]),n("div",{staticClass:"btm"},[n("div",{staticClass:"btm-left"},[n("img",{staticClass:"icon-location",attrs:{src:i("7b7b"),alt:""}}),n("div",{staticClass:"item-addr"},[t._v(t._s(t.distanceText)+t._s(a.distance))])]),a.audioUrl?n("div",{staticClass:"audio-icon iconfont iconlisten"}):t._e()])])])}}])})],1)])},c=[],o=(i("ac6a"),i("cebc")),l=(i("386d"),i("cd11")),u=i("1ae8"),d=i("ac2d"),f=i("a21f"),g=i("ffbe"),h=i("ed08"),m={name:"building",data:function(){return{data:[],offset:10,start:0,reachBtm:!1,isWaiting:!0,location:{lat:"31.245105",lon:"121.506377"},itemWithoutImage:0}},components:{flexList:l["a"]},mixins:[u["a"],g["a"]],created:function(){this.getData()},methods:{getData:function(){var t=this;if(this.isWaiting=!0,d["a"].sourceType())Object(f["b"])({vm:this}).then(function(e){var i={keyword:"",appName:"BGSH_CHINA",lat:e.gdLatitude,lon:e.gdLongitude,offset:t.offset,start:t.start};t.$axios.search.queryBuilding(i,{hideLoading:t.start>0}).then(function(e){var i=e.code,n=e.data;if(0===+i){var a=n.result,s=n.totalRowNum,r=a.filter(function(e){var i=t.getImageList({item:e,width:335,clip:!1});return i?(e.distance=t.formatDistance(e.dis),!0):(t.itemWithoutImage++,!1)});t.data=t.data.concat(r),t.reachBtm=t.data.length===s-t.itemWithoutImage,t.start+=a.length,t.isWaiting=!1}},function(){t.isWaiting=!1})},function(){throw new Error("获取位置失败")});else{var e=Object(o["a"])({keyword:"",appName:"BGSH_CHINA"},this.location,{offset:this.offset,start:this.start});this.$axios.search.queryBuilding(e,{hideLoading:this.start>0}).then(function(e){var i=e.code,n=e.data;if(0===+i){var a=n.result,s=n.totalRowNum;a.forEach(function(e){e.distance=t.formatDistance(e.dis);var i=t.getImageList({item:e,width:335,clip:!1});if(!i){var n=a.indexOf(e);a.splice(n,1)}}),t.data=t.data.concat(a),t.reachBtm=t.data.length===s,t.start+=a.length,t.isWaiting=!1}})}},formatDistance:function(t){return t>1e3?"".concat(parseFloat((t/1e3).toFixed(1)),"km"):"".concat(parseInt(t),"m")},toDetail:function(t){var e=t.id;d["a"].openNewWebView({url:Object(h["d"])("/build-detail/".concat(e)),isFitWindow:!1})}}},p=m,v=(i("21a7"),i("2877")),b=Object(v["a"])(p,r,c,!1,null,"69609568",null),w=b.exports,A=i("9299"),y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"performance-list"}},[i("div",{attrs:{id:"list"}},[i("perform-list",{attrs:{id:"simple-list",list:t.list,reachBtm:t.reachBtm,isWaiting:t.isWaiting},on:{loadMore:t.getListData}})],1)])},C=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,a){return n("div",{key:"item"+a+e.id,staticClass:"item",on:{click:function(i){return t.viewDetail(e)}}},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.cover,expression:"item.cover",arg:"background-image"}],staticClass:"item-bg"},[t.fields.video&&e[t.fields.video]?n("img",{staticClass:"video-icon",attrs:{src:i("ce106"),alt:""}}):t._e()]),n("p",{staticClass:"item-detail"},[t._v(t._s(e.title))]),n("p",{staticClass:"item-time"},[n("span",[t._v(t._s(t.dateFormat(e.activityStartDate,"yyyy.mm.dd")))]),t._v(" - "),n("span",[t._v(t._s(t.dateFormat(e.activityEndDate,"yyyy.mm.dd")))])])])}),n("div",{attrs:{id:"blank"}}),n("loading",{attrs:{reachBtm:t.reachBtm,list:t.list,isWaiting:t.isWaiting},on:{loadMore:t.loadMore}})],2)},B=[],D=i("6419"),W=i("8b3f"),L=i("62a2"),E=L["a"].dateFormat,M={name:"simple-list",props:{showBlank:{type:Boolean,default:!1},list:Array,fields:{type:Object,default:function(){return{bg:"url",title:"title",desc:"desc",distance:"distance"}}},reachBtm:Boolean,isWaiting:Boolean},components:{loading:W["a"]},mixins:[D["a"]],methods:{dateFormat:E,loadMore:function(){this.$emit("loadMore")}}},T=M,j=(i("605f"),Object(v["a"])(T,x,B,!1,null,"026c30d6",null)),O=j.exports,U=i("90e9"),I=U["a"].queryConferenceByNowDateV1,k={name:"performance-list",data:function(){var t="2-4",e=new Date,i=e.getFullYear(),n=new Date(e.toDateString()).getTime(),a=new Date("".concat(i+10,"/12/31")).getTime();return{categoryId:t,list:[],isWaiting:!0,startNum:0,reachBtm:!1,beginTime:n,endTime:a}},components:{performList:O},created:function(){this.getListData()},methods:{getListData:function(){var t=this;this.reachBtm||(this.isWaiting=!0,Object(f["b"])({vm:this}).then(function(e){var i={start:t.startNum,offset:10,lat:e.gdLatitude,lon:e.gdLongitude,beginTime:t.beginTime,endTime:t.endTime,categoryId:t.categoryId,channel:1,city:4,language:t.isZH?7:6};I(i,{hideLoading:!0}).then(function(e){var i=e.data,n=i.item,a=i.totalNum;n.forEach(function(e){e.cover=t.imgCover(e.cover,690,300)}),0===t.startNum?t.list=n:t.list=t.list.concat(n),t.startNum++,t.reachBtm=a===t.list.length,t.isWaiting=!1})},function(t){throw t}))}}},F=k,H=(i("5bf2"),Object(v["a"])(F,y,C,!1,null,"5943f739",null)),P=H.exports,Y={name:"culture",data:function(){var t="文化",e=[{label:"海派文化",path:"/red-culture/1",isFitWindow:!0,className:"icon-haipai",url:i("5b63")},{label:"红色文化",path:"/red-culture/2",isFitWindow:!0,className:"icon-hongse",url:i("5b63")},{label:"江南文化",path:"/jiangnan-culture",className:"icon-jiangnan",url:i("5b63")}],n="15-1";return{business:[{title:"建筑可阅读",show:!0},{title:"文艺演出",show:!1}],performanceCategoryId:n,title:t,nav:e,bgUrl:"http://hhh.images.visitshanghai.com.cn/nine/culture_top_new.png",guideData:null,videoUrl:"http://hhh.images.visitshanghai.com.cn/lmoZFqgdBJPOocdpP_DQc0hWVcrp?e=1559132179&token=JT9hop2MntCNMNz8O7UqTb4scQYpASy7sK2q11su:HeLcw-OpRP4gbXl4fMMhqNyF6Ow="}},components:{cultureTemplate:s["a"],building:w,switchTitle:A["a"],performance:P},created:function(){d["a"].setAppTitle({title:this.title})},methods:{changeTitle:function(t){this.business[0].show=this.business[1].show=!1,this.business[t].show=!0,this.$refs.wrapper.changePosition()}}},N=Y,_=(i("0337"),Object(v["a"])(N,n,a,!1,null,null,null));e["default"]=_.exports},"1ae8":function(t,e,i){"use strict";e["a"]={data:function(){return{distanceText:"距您"}}}},"21a7":function(t,e,i){"use strict";var n=i("5096"),a=i.n(n);a.a},"2f21":function(t,e,i){"use strict";var n=i("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},"49a2":function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"c",function(){return c});i("6762"),i("2fdb");var n=750,a=window.innerWidth*window.devicePixelRatio,s=a/n,r=function(t,e,i){if(!e)return t;var n=parseInt(e*s),a=0;i&&(a=parseInt(i*s));var r=t;return n&&(r=t.includes("?")?"".concat(t,"&imageView2/1/w/").concat(n):"".concat(t,"?imageView2/1/w/").concat(n)),a&&(r="".concat(r,"/h/").concat(a)),r},c=function(t,e,i){if(!e)return t;var n=parseInt(e*s),a=0;i&&(a=parseInt(i*s));var r=t;return n&&(r=t.includes("?")?"".concat(t,"&imageMogr2/thumbnail/").concat(n,"x"):"".concat(t,"?imageMogr2/thumbnail/").concat(n,"x")),a&&(r="".concat(r).concat(a)),r};e["b"]={methods:{clipImage:r,resizeImage:c}}},5096:function(t,e,i){},"55dd":function(t,e,i){"use strict";var n=i("5ca1"),a=i("d8e8"),s=i("4bf8"),r=i("79e5"),c=[].sort,o=[1,2,3];n(n.P+n.F*(r(function(){o.sort(void 0)})||!r(function(){o.sort(null)})||!i("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(s(this)):c.call(s(this),a(t))}})},"5b63":function(t,e,i){t.exports=i.p+"img/culture-new.bbb3bf29.png"},"5bf2":function(t,e,i){"use strict";var n=i("759c"),a=i.n(n);a.a},"605f":function(t,e,i){"use strict";var n=i("7441"),a=i.n(n);a.a},"62a2":function(t,e,i){"use strict";i("456d"),i("ac6a"),i("3b2b"),i("a481");e["a"]={dateFormat:function(t,e){var i=new Date,n="日一二三四五六";t&&i.setTime(t),e=e||"yyyy-mm-dd";var a={"m+":i.getMonth()+1,"d+":i.getDate(),"w+":n.charAt(i.getDay()),"h+":i.getHours(),"M+":i.getMinutes(),"s+":i.getSeconds()};return/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").slice(-RegExp.$1.length))),Object.keys(a).forEach(function(t){new RegExp("(".concat(t,")")).test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[t]:"00".concat(a[t]).slice((""+a[t]).length)))}),e}}},6419:function(t,e,i){"use strict";var n=i("ac2d"),a=i("ed08");e["a"]={methods:{viewDetail:function(t){var e=t.id,i=t.dis;e&&n["a"].openNewWebView({url:Object(a["d"])("/list-detail/".concat(e,"?dis=").concat(i)),isFitWindow:!1})}}}},7441:function(t,e,i){},7514:function(t,e,i){"use strict";var n=i("5ca1"),a=i("0a49")(5),s="find",r=!0;s in[]&&Array(1)[s](function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(s)},"759c":function(t,e,i){},"7b7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAAB2UlEQVQ4jZWVucrCQBSFTwZ3cAFxRxAsBO0EG0W00jfwIX0EW5fCXqwUxN3CxgWx8ecMRCaZ5FcPRMZ7z/0cTzJqvF6vF2za7/dYLBY4HA643++yGQqFkE6nUSwWkclk7COwgC6XC4bDIXa7nWZUlc1m0Ww2EQ6HddDpdMJgMMDj8fgXYioQCKDT6SCZTMqK4Mv1ev0JQtHLGc6+QaPRyBXCbHi5wThLeRjoZrPRTPl8HvV6/Z0D85tMJliv1xYfZ8kQy+VSgxQKBXS7XUuYXLPGnl1kCN5qVUIINBoN12zYo0cVGeJ2u1mK0WgUwWDQFcQeParIEHa63+93hbh5yBDxeNxSPJ/PH0F2Dxkil8tZis/nE/P53BXCHj2qyBClUgkej8fSmE6nWK1WGoQ19lRxlgx5RMbjseMu+EmpVEquj8cjttut5imXy/J5kyA+of1+X9vyJ/l8PvR6PXnu5C3jolqt/gShOMNZmGeNqlQqSCQSX0Po5YypN8gwDLRaLS14J9FDL2c0EBWLxVCr1T6C6KFXlbCbuF2ng2mKPfUrOe7IFLcdiUS0OmvsOckR5PV65c8ob68prllj72sQxQza7bYMlBfX9lxUOf4dqZrNZvKtUy5vAfgDyR67rdYND+UAAAAASUVORK5CYII="},9299:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"discount flex-around"},t._l(t.business,function(e,n){return i("div",{key:n,class:{active:e.show},on:{click:function(e){return t.change(n)}}},[i("p",{staticClass:"text-overflow"},[t._v(t._s(e.title))])])}),0)},a=[],s=(i("ac6a"),{props:["business"],data:function(){return{currentIndex:0}},methods:{change:function(t){this.currentIndex!==t&&(this.currentIndex=t,this.business.forEach(function(t){t.show=!1}),this.business[t].show=!0,this.$emit("changeTitle",t))}}}),r=s,c=(i("c57e"),i("2877")),o=Object(c["a"])(r,n,a,!1,null,"0ee3beb6",null);e["a"]=o.exports},c474:function(t,e,i){},c57e:function(t,e,i){"use strict";var n=i("fd04"),a=i.n(n);a.a},cced:function(t,e,i){"use strict";var n=i("13cf"),a=i.n(n);a.a},cd11:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"flex-list"}},[i("div",{attrs:{id:"wrapper"}},[i("div",{ref:"left",attrs:{id:"left"}}),i("div",{ref:"right",attrs:{id:"right"}})]),i("div",{ref:"clone",attrs:{id:"clone"}},t._l(t.list,function(e,n){return i("div",{key:"content"+n,ref:"item"+n,refInFor:!0},[t._t("default",null,{data:e,index:n,imgLoaded:t.imgLoaded})],2)}),0),t.needLoading?i("loading",{attrs:{list:t.list,reachBtm:t.allImageLoaded,isWaiting:t.isWaiting},on:{loadMore:t.loadMore}}):t._e()],1)},a=[],s=(i("55dd"),i("ac6a"),i("456d"),i("8b3f")),r={name:"flex-list",props:{needLoading:{type:Boolean,default:!0},list:Array,isWaiting:Boolean,reachBtm:Boolean,inOrder:{type:Boolean,default:!0}},components:{loading:s["a"]},computed:{allImageLoaded:function(){return this.reachBtm&&this.loadedCount===this.list.length}},data:function(){return{leftHeight:0,rightHeight:0,queue:{},appended:{},loadedCount:0}},methods:{imgLoaded:function(t,e){this.loadedCount++,this.inOrder?0===t?(this.append(t,e),this.checkQueue()):this.appended[t-1]?(this.append(t,e),this.checkQueue()):this.queue[t]=e:this.append(t,e)},append:function(t,e){delete this.queue[t],this.appended[t]=e,e.classList.add("loaded");var i=this.$refs.left,n=this.$refs.right,a=this.$refs["item"+t][0],s=a.offsetHeight;this.leftHeight>this.rightHeight?(this.rightHeight+=s,n.appendChild(a)):(this.leftHeight+=s,i.appendChild(a))},checkQueue:function(){var t=this,e=Object.keys(this.queue);e.sort(function(t,e){return t-e}),e.forEach(function(e){t.appended[e-1]&&t.append(e,t.queue[e])})},loadMore:function(){this.$emit("loadMore")}},watch:{list:function(t){0===t.length&&(this.loadedCount=0,this.leftHeight=0,this.rightHeight=0)}}},c=r,o=(i("cced"),i("2877")),l=Object(o["a"])(c,n,a,!1,null,"0e2e89b6",null);e["a"]=l.exports},cd1c:function(t,e,i){var n=i("e853");t.exports=function(t,e){return new(n(t))(e)}},ce106:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAAWlBMVEUAAAD////x8fEKCgogICD8/Pz///9HcExGRka0tLT////j4+P///////////////+MjIzu7u7///+Xl5fNzc3////Gxsb///////9eXl7d3d14eHj///////9gh98DAAAAHXRSTlOA3PKCiPInAJTFxOX7dWACsO8FtdVQ0KyYnOGmhC0xhpgAAAM1SURBVFjDzZl/c7IwDMdTCrX80CooKJr3/zaftHKbbELTYm9P/tnddn4W802aNIWd14y67K+VEEXTFEJU1/1FGf+nwPN3tR8KtNbgy49i2KstYPUQTxxm47kvyfrzmE2/Eg8VBzaH6snsj7ccXiy/HfsnvTqYYHB7cM7WnYa3prvauX1ow8AOm5UL1IldZg4dAFY2CKdOgsdkd7IBUUxw+yDps6MX69BH8rp5tBywdbcpc2BaXjZvnf4FvlDa1hoCTJOMxcUH3lPQSglBJkv60H4dfKV/fodgu9PXvJplcDtQMmiIME3pMbRLYEPcOo/hgswp0INZAFMcxjiuJY8Ujbdgs4/295l39UzBb/CF4ruBS2SK8+U3WBVY6C1ckJoQ6ie4pXq7w0a7Uw22P8APqgvYbFQpjzlYNVjL7WBZY6Nm4AobDR8w3WD1Cj58JBBTMA7f4FZgln8GnGco2i8wOXyED9lxctmCjcCT/BRYnlCYCUwOd6vpOZ4DlO2eLoNLiWzFYSnpsC34oZKZSwwCK09KaDecnPOAxFAOTEWn/WDMbtxcduVHYIE1MMDUupkK1ygsWHmk+wKzu3dnYwG2L2smmKmhtic+7AbMgAtmapjhsANTYB8AZmnYY2FAect5DuZoSGWtgFrdLQjM0PBGzQ9IuzwQ7NUwJ/Xg6tPuDdirYYZXqHCMAHs0HLECgecY8LqGZxQE7qPAqxr2BC683W4JvKJhiQU08eDlzl5iswm8ODtZ8IZQLA+RNhTx4q0kc++yIi7dVsvPpltkgawfGLZA4krac8TZko45hPB08x9CEcemt424YzP4oGc0PnfQh7YmTqt2rSmwmbKGC9dMg9q/T7VZ+w8YWJgD3DSwsEcs9sg5jVjcoZC9HvkaCnljLHsk/B5jPYP3E3ziDrEvg7f3qjCGjN2vVwXf5Ube2e7OLzcm1XUs3QUy2ZU33SXdJFsrJFuEmGSrmw8sm+Dtsmn7ekwurMfcIjbJQs9sWkHC8gpy09IUVpemyda85HOixXTCVfrORC//zV89V6R7YLFnXZonofBHLMMHm1TPboRmPhSa/+dp88dj7Hyo3/gYu+X5+B9slq0PbUEvLQAAAABJRU5ErkJggg=="},e853:function(t,e,i){var n=i("d3f4"),a=i("1169"),s=i("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},fd04:function(t,e,i){},ffbe:function(t,e,i){"use strict";i.d(e,"b",function(){return a});i("7514");var n=i("49a2"),a={methods:{getVideoLink:function(t){var e=t.medias.find(function(t){return 2===+t.mediaType});return e?e.url:""}}};e["a"]={methods:{getImageList:function(t){var e=t.item,i=t.single,a=void 0===i||i,s=t.clip,r=void 0===s||s,c=t.width,o=t.height;if(a){var l=e.medias.find(function(t){return 1===+t.mediaType&&(e.imgUrl=e.url=r?Object(n["a"])(t.url,c,o):Object(n["c"])(t.url,c,o),!0)}),u=!!l;return u||console.warn("存在无图片条目",e),u}e.imageList=e.medias.filter(function(t){return 1===+t.mediaType&&(t.imgUrl=t.url=r?Object(n["a"])(t.url,c,o):Object(n["c"])(t.url,c,o),!0)});var d=e.imageList.length>0;return d||console.warn("存在无图片条目",e),d}}}}}]);