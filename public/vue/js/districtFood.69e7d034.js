(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["districtFood"],{"084a":function(t,e,i){},"0a49":function(t,e,i){var n=i("9b43"),a=i("626a"),r=i("4bf8"),o=i("9def"),s=i("cd1c");t.exports=function(t,e){var i=1==t,c=2==t,d=3==t,u=4==t,l=6==t,f=5==t||l,m=e||s;return function(e,s,g){for(var v,h,p=r(e),b=a(p),w=n(s,g,3),C=o(b.length),y=0,A=i?m(e,C):c?m(e,0):void 0;C>y;y++)if((f||y in b)&&(v=b[y],h=w(v,y,p),t))if(i)A[y]=h;else if(h)switch(t){case 3:return!0;case 5:return v;case 6:return y;case 2:A.push(v)}else if(u)return!1;return l?-1:d||u?u:A}}},1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"15ba":function(t,e,i){},"1ae8":function(t,e,i){"use strict";e["a"]={data:function(){return{distanceText:"距您"}}}},"2cab":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"yellow_star"},[i("div",{staticClass:"back1 v-md"},t._l(5,function(t){return i("div",{key:t,staticClass:"iconfont iconicon_Star"})}),0),i("div",{staticClass:"front v-md",style:"width:"+100*t.code/5+"%;"},t._l(5,function(t){return i("div",{key:t,staticClass:"iconfont iconicon_Star"})}),0)])},a=[],r={name:"yellow_star",props:["code"],data:function(){return{}},components:{},mounted:function(){},computed:{},methods:{}},o=r,s=(i("e5bd"),i("2877")),c=Object(s["a"])(o,n,a,!1,null,"1aaca8b4",null);e["a"]=c.exports},"3f7c":function(t,e,i){"use strict";e["a"]={methods:{formatDistance:function(t){return t>1e3?"".concat(parseFloat((t/1e3).toFixed(1)),"km"):"".concat(parseInt(t),"m")}}}},"47eb":function(t,e,i){"use strict";var n=i("4b0c"),a=i.n(n);a.a},"49a2":function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"c",function(){return s});i("6762"),i("2fdb");var n=750,a=window.innerWidth*window.devicePixelRatio,r=a/n,o=function(t,e,i){if(!e)return t;var n=parseInt(e*r),a=0;i&&(a=parseInt(i*r));var o=t;return n&&(o=t.includes("?")?"".concat(t,"&imageView2/1/w/").concat(n):"".concat(t,"?imageView2/1/w/").concat(n)),a&&(o="".concat(o,"/h/").concat(a)),o},s=function(t,e,i){if(!e)return t;var n=parseInt(e*r),a=0;i&&(a=parseInt(i*r));var o=t;return n&&(o=t.includes("?")?"".concat(t,"&imageMogr2/thumbnail/").concat(n,"x"):"".concat(t,"?imageMogr2/thumbnail/").concat(n,"x")),a&&(o="".concat(o).concat(a)),o};e["b"]={methods:{clipImage:o,resizeImage:s}}},"4b0c":function(t,e,i){},"4ef4":function(t,e,i){"use strict";var n=i("084a"),a=i.n(n);a.a},6419:function(t,e,i){"use strict";var n=i("ac2d"),a=i("ed08");e["a"]={methods:{viewDetail:function(t){var e=t.id,i=t.dis;e&&n["a"].openNewWebView({url:Object(a["d"])("/list-detail/".concat(e,"?dis=").concat(i)),isFitWindow:!1})}}}},"659a":function(t,e,i){"use strict";var n=i("83ed"),a=i.n(n);a.a},"6a02":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,a){return n("div",{key:"item"+(e.id||a),staticClass:"item",class:{smallBg:t.smallBg,noborder:a===t.list.length-1},on:{click:function(i){return t.viewDetail(e)}}},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.url,expression:"item.url",arg:"background-image"}],staticClass:"item-bg"},[t.fields.video&&e[t.fields.video]?n("img",{staticClass:"video-icon",attrs:{src:i("ce106"),alt:""}}):t._e()]),n("div",{staticClass:"item-right"},[n("div",{staticClass:"item-title"},[t._v(t._s(e[t.fields.title]))]),t.fields.discount?n("div",{staticClass:"item-discount"},[t._v(t._s(t._f("discount")(e,t.showBlank)))]):t._e(),n("div",{staticClass:"item-desc"},[t._v(t._s(e[t.fields.desc]))]),n("div",{staticClass:"item-addr"},[n("div",[n("img",{staticClass:"icon-location",attrs:{src:i("7b7b"),alt:""}}),t._v(t._s(t.distanceText)+t._s(e[t.fields.distance]))]),t.showNav?n("div",{staticClass:"go-to",on:{click:function(i){return i.stopPropagation(),t.goToMap(e)}}},[n("div",{staticClass:"iconfont iconicon_nav"}),t._v("去这里")]):t._e()])])])}),n("div",{attrs:{id:"blank"}}),n("loading",{attrs:{reachBtm:t.reachBtm,list:t.list,isWaiting:t.isWaiting},on:{loadMore:t.loadMore}})],2)},a=[],r=i("1ae8"),o=i("6419"),s=i("8b3f"),c=i("f216"),d=i("c0c8"),u={name:"simple-list",props:{showNav:{type:Boolean,default:!1},showBlank:{type:Boolean,default:!1},list:Array,fields:{type:Object,default:function(){return{bg:"url",title:"title",desc:"desc",distance:"distance"}}},smallBg:Boolean,reachBtm:Boolean,isWaiting:Boolean},components:{loading:s["a"]},mixins:[r["a"],o["a"],c["a"],d["a"]],methods:{loadMore:function(){this.$emit("loadMore")}}},l=u,f=(i("4ef4"),i("2877")),m=Object(f["a"])(l,n,a,!1,null,"94aecbd6",null);e["a"]=m.exports},"705d":function(t,e,i){},7514:function(t,e,i){"use strict";var n=i("5ca1"),a=i("0a49")(5),r="find",o=!0;r in[]&&Array(1)[r](function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(r)},"7b7b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAAB2UlEQVQ4jZWVucrCQBSFTwZ3cAFxRxAsBO0EG0W00jfwIX0EW5fCXqwUxN3CxgWx8ecMRCaZ5FcPRMZ7z/0cTzJqvF6vF2za7/dYLBY4HA643++yGQqFkE6nUSwWkclk7COwgC6XC4bDIXa7nWZUlc1m0Ww2EQ6HddDpdMJgMMDj8fgXYioQCKDT6SCZTMqK4Mv1ev0JQtHLGc6+QaPRyBXCbHi5wThLeRjoZrPRTPl8HvV6/Z0D85tMJliv1xYfZ8kQy+VSgxQKBXS7XUuYXLPGnl1kCN5qVUIINBoN12zYo0cVGeJ2u1mK0WgUwWDQFcQeParIEHa63+93hbh5yBDxeNxSPJ/PH0F2Dxkil8tZis/nE/P53BXCHj2qyBClUgkej8fSmE6nWK1WGoQ19lRxlgx5RMbjseMu+EmpVEquj8cjttut5imXy/J5kyA+of1+X9vyJ/l8PvR6PXnu5C3jolqt/gShOMNZmGeNqlQqSCQSX0Po5YypN8gwDLRaLS14J9FDL2c0EBWLxVCr1T6C6KFXlbCbuF2ng2mKPfUrOe7IFLcdiUS0OmvsOckR5PV65c8ob68prllj72sQxQza7bYMlBfX9lxUOf4dqZrNZvKtUy5vAfgDyR67rdYND+UAAAAASUVORK5CYII="},"83ed":function(t,e,i){},"8b3f":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.reachBtm&&t.needScroll,expression:"reachBtm && needScroll"}],ref:"wrapper",attrs:{id:"loading"}},[t._v(t._s(t.isBrand?"持续更新中":"- 已经到底了 -"))])},a=[];i("c5f6");function r(t){var e=getComputedStyle(t)["overflow-y"];return"scroll"===e||"auto"===e?t:t===document.documentElement?document:r(t.parentNode)}var o={name:"list-loading",props:{reachBtm:Boolean,isWaiting:Boolean,isBrand:Boolean,distance:{type:Number,default:parseInt(window.innerHeight/3)}},data:function(){return{parent:null,needScroll:!1,noMoreText:"- 已经到底了 -",continue:"持续更新中",observerConfig:{attributes:!1,childList:!0,subtree:!0},observer:null,scrollObserver:null,scrollObserverConfig:{attributes:!0,childList:!1,subtree:!1}}},mounted:function(){this.parent=r(this.$refs.wrapper),this.parent.addEventListener("scroll",this.handleScroll),this.checkNeedScroll();var t={attributes:!1,childList:!0,subtree:!0},e=new MutationObserver(this.checkNeedScroll);e.observe(this.parent===document?document.body:this.parent,t),this.observer=e;var i={attributes:!0,childList:!1,subtree:!1};this.scrollObserver=new MutationObserver(this.checkScrollStatus),this.scrollObserver.observe(this.parent,i)},methods:{loadMore:function(t){this.$emit("loadMore",t)},handleScroll:function(){if(!this.reachBtm&&!this.isWaiting){var t=0,e=0,i=0;this.parent===document?(t=window.pageYOffset,e=document.documentElement.offsetHeight,i=window.innerHeight):(t=this.parent.scrollTop,e=this.parent.scrollHeight,i=this.parent.clientHeight),t>0&&t+i+this.distance>=e&&this.$emit("loadMore")}},checkNeedScroll:function(t){var e=this;this.$nextTick(function(){e.parent===document?e.needScroll=window.innerHeight<document.documentElement.offsetHeight:e.needScroll=e.parent.clientHeight<e.parent.scrollHeight})},checkScrollStatus:function(){if(this.parent!==document){var t=r(this.$refs.wrapper);t!==this.parent&&(this.unbind(),this.parent=t,this.parent.addEventListener("scroll",this.handleScroll),this.observer.observe(this.parent===document?document.body:this.parent,this.observerConfig),this.parent!==document&&this.scrollObserver.observe(this.parent,this.scrollObserverConfig))}},unbind:function(){this.parent.removeEventListener("scroll",this.handleScroll),this.observer.disconnect(),this.scrollObserver.disconnect()}},beforeDestroy:function(){this.unbind()}},s=o,c=(i("ce09"),i("2877")),d=Object(c["a"])(s,n,a,!1,null,"7cd3b10d",null);e["a"]=d.exports},a21f:function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"a",function(){return c}),i.d(e,"c",function(){return d});var n=i("ac2d"),a=null;function r(t){var e=t.force,i=void 0!==e&&e,r=t.vm;return new Promise(function(t,e){if(a&&!i)t(a);else if(n["a"].sourceType())n["a"].gainLocation(function(i){var n=i.result;n&&n.gdLatitude&&n.gdLongitude?(a=n,t(n)):e(new Error("获取位置失败"))},r);else{var o={gdLatitude:"31.24916171",gdLongitude:"121.48789949"};t(o)}})}function o(){return new Promise(function(t,e){n["a"].getClientInfo(function(i){var n=i.msgCode,a=i.result;100===+n?(console.log("getDeviceIdgetDeviceId",a),t(a)):e(new Error("获取设备信息失败"))})})}function s(t){t.force;var e=t.vm;return new Promise(function(t,i){if(n["a"].sourceType())n["a"].gainNowLocation(function(e){var n=e.msgCode,r=e.result;100===n&&r&&r.gdLatitude&&r.gdLongitude?(a=r,t(r)):i(new Error("获取位置失败"))},e);else{var r={gdLatitude:"31.312764",gdLongitude:"121.393972"};t(r)}})}function c(t,e){}function d(){return Promise.resolve({gdLatitude:"31.24916171",gdLongitude:"121.48789949"})}},b1ce:function(t,e,i){},b747:function(t,e,i){"use strict";var n=i("15ba"),a=i.n(n);a.a},ba16:function(t,e,i){},c0c8:function(t,e,i){"use strict";i("7f7f");var n=i("ac2d");e["a"]={methods:{goToMap:function(t){var e={lat:t.lat,lng:t.lon,chainName:t.title||t.name,address:t.address,routerType:t.dis&&t.dis>1e3?1:3};n["a"].openRouterMap(e)}}}},c177:function(t,e,i){"use strict";var n=i("dbcc"),a=i.n(n);a.a},cd1c:function(t,e,i){var n=i("e853");t.exports=function(t,e){return new(n(t))(e)}},ce09:function(t,e,i){"use strict";var n=i("b1ce"),a=i.n(n);a.a},ce106:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAAWlBMVEUAAAD////x8fEKCgogICD8/Pz///9HcExGRka0tLT////j4+P///////////////+MjIzu7u7///+Xl5fNzc3////Gxsb///////9eXl7d3d14eHj///////9gh98DAAAAHXRSTlOA3PKCiPInAJTFxOX7dWACsO8FtdVQ0KyYnOGmhC0xhpgAAAM1SURBVFjDzZl/c7IwDMdTCrX80CooKJr3/zaftHKbbELTYm9P/tnddn4W802aNIWd14y67K+VEEXTFEJU1/1FGf+nwPN3tR8KtNbgy49i2KstYPUQTxxm47kvyfrzmE2/Eg8VBzaH6snsj7ccXiy/HfsnvTqYYHB7cM7WnYa3prvauX1ow8AOm5UL1IldZg4dAFY2CKdOgsdkd7IBUUxw+yDps6MX69BH8rp5tBywdbcpc2BaXjZvnf4FvlDa1hoCTJOMxcUH3lPQSglBJkv60H4dfKV/fodgu9PXvJplcDtQMmiIME3pMbRLYEPcOo/hgswp0INZAFMcxjiuJY8Ujbdgs4/295l39UzBb/CF4ruBS2SK8+U3WBVY6C1ckJoQ6ie4pXq7w0a7Uw22P8APqgvYbFQpjzlYNVjL7WBZY6Nm4AobDR8w3WD1Cj58JBBTMA7f4FZgln8GnGco2i8wOXyED9lxctmCjcCT/BRYnlCYCUwOd6vpOZ4DlO2eLoNLiWzFYSnpsC34oZKZSwwCK09KaDecnPOAxFAOTEWn/WDMbtxcduVHYIE1MMDUupkK1ygsWHmk+wKzu3dnYwG2L2smmKmhtic+7AbMgAtmapjhsANTYB8AZmnYY2FAect5DuZoSGWtgFrdLQjM0PBGzQ9IuzwQ7NUwJ/Xg6tPuDdirYYZXqHCMAHs0HLECgecY8LqGZxQE7qPAqxr2BC683W4JvKJhiQU08eDlzl5iswm8ODtZ8IZQLA+RNhTx4q0kc++yIi7dVsvPpltkgawfGLZA4krac8TZko45hPB08x9CEcemt424YzP4oGc0PnfQh7YmTqt2rSmwmbKGC9dMg9q/T7VZ+w8YWJgD3DSwsEcs9sg5jVjcoZC9HvkaCnljLHsk/B5jPYP3E3ziDrEvg7f3qjCGjN2vVwXf5Ube2e7OLzcm1XUs3QUy2ZU33SXdJFsrJFuEmGSrmw8sm+Dtsmn7ekwurMfcIjbJQs9sWkHC8gpy09IUVpemyda85HOixXTCVfrORC//zV89V6R7YLFnXZonofBHLMMHm1TPboRmPhSa/+dp88dj7Hyo3/gYu+X5+B9slq0PbUEvLQAAAABJRU5ErkJggg=="},d6a0:function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"b",function(){return a}),i.d(e,"d",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"e",function(){return s});var n="district_search",a="district_active",r="district_video",o=null,s=function(t){o=t}},dbcc:function(t,e,i){},e5bd:function(t,e,i){"use strict";var n=i("705d"),a=i.n(n);a.a},e853:function(t,e,i){var n=i("d3f4"),a=i("1169"),r=i("2b4c")("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),n(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},ed08:function(t,e,i){"use strict";i.d(e,"d",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"g",function(){return c}),i.d(e,"c",function(){return d}),i.d(e,"f",function(){return u}),i.d(e,"j",function(){return g}),i.d(e,"h",function(){return p}),i.d(e,"b",function(){return b}),i.d(e,"e",function(){return w}),i.d(e,"i",function(){return C});var n=i("f121"),a=i("f76d"),r=n["a"].ENV_URL,o=function(t){return"".concat(r,"/#").concat(t)},s=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",i.onerror=e,document.head.appendChild(i)}window.initAMap=function(){t(window.AMap)}})};function c(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function d(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(i){return e}}var u={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},l=Object(a["a"])(),f="",m="";"iOS"===l?(f="https://itunes.apple.com/cn/app/id1395725438",m="saicpassenger://"):f="https://marketing.saicmobility.com/mis-h5/app-download";var g={appScheme:"saicpassenger://",downloadAppUrl:f,packageName:"com.saicmobility.user",otherAppPage:m},v="",h="";"iOS"===l?(v="https://apps.apple.com/cn/app/id732618720",h="shiminyun://"):v="http://m.eshimin.com/";var p={appScheme:"shiminyun://",downloadAppUrl:v,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:h},b=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],w=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],C=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],n=t.slice(0,17),a=t.slice(17,18);a=isNaN(parseInt(a))?a.toLowerCase():parseInt(a);for(var r=0,o=0;o<17;o++)r=(r+=parseInt(n.charAt(o))*i[o])%11;var s=[1,0,"X",9,8,7,6,5,4,3,2],c="X"===s[r]?s[r].toLowerCase():s[r];return a===c?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}},ef57:function(t,e,i){"use strict";var n=i("ba16"),a=i.n(n);a.a},f213:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"district-food"}},[i("div",{style:{backgroundImage:"url("+t.bgUrl+")"},attrs:{id:"header"}}),i("div",{attrs:{id:"main"}},[t.discountStoresId?i("discountStores",{attrs:{categoryId:t.discountStoresId}}):t._e(),t.oldBrandId?i("oldBrand",{attrs:{categoryId:t.oldBrandId}}):t._e(),t.specialFoodName?i("specialFood",{attrs:{name:t.specialFoodName}}):t._e()],1)])},a=[],r=(i("7514"),i("7f7f"),i("ac2d")),o=i("d6a0"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"store-wrapper"}},[i("div",{staticClass:"title"},[t._v("优惠餐厅")]),i("div",{staticClass:"list",attrs:{id:"store-list"}},t._l(t.visibleStores,function(e,n){return i("div",{key:"store"+n,staticClass:"store-item",on:{click:function(i){return t.toStoreDetail(e)}}},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.imgUrl,expression:"store.imgUrl",arg:"background-image"}],staticClass:"store-item-img"}),i("div",{staticClass:"store-item-right"},[i("div",{staticClass:"store-item-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"store-item-discount-wrapper"},[e.discountInfo?i("div",{staticClass:"store-item-discount"},[t._v("惠")]):t._e(),i("div",{staticClass:"store-item-addr"},[t._v(t._s(e.discountInfo))])]),i("div",{staticClass:"store-item-btn"},[t._v("立即领取")])])])}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],attrs:{id:"more"},on:{click:t.showMore}},[t._v("查看更多")])])},c=[],d=(i("ac6a"),i("ed08")),u=i("a21f"),l=i("ffbe"),f={name:"discount-store",props:{categoryId:String},mixins:[l["a"]],data:function(){return{stores:[],completeStoreList:!1,characterLimit:0}},created:function(){this.getStores()},computed:{hasMore:function(){return this.stores.length>6&&!1===this.completeStoreList},visibleStores:function(){return this.completeStoreList?this.stores:this.stores.slice(0,6)}},methods:{getStores:function(){var t=this;Object(u["b"])({vm:this}).then(function(e){var i={channel:1,city:4,language:7,categoryId:t.categoryId,offset:20,start:0,lat:e.gdLatitude,lon:e.gdLongitude};t.$axios.content.queryContentByOrganize(i).then(function(e){var i=e.code,n=e.data;if(0===+i){var a=n.result;a.forEach(function(e){t.getImageList({item:e,width:180,height:180,clip:!0});var i=e.priceRate,n=e.products;if(i&&+i)e.discountInfo="".concat(i,"折");else if(n&&n.length>0){var a=n[0],r=a.id,o=a.discountsDesc;r&&o&&(e.discountInfo=t.limitWidth(o))}}),t.stores=a}})})},limitWidth:function(t){if(!this.characterLimit){var e=parseFloat(getComputedStyle(document.documentElement).fontSize),i=window.innerWidth-4.69334*e,n=.34667*e;this.characterLimit=i/n*1.5}return t.length>this.characterLimit?t.substr(0,this.characterLimit)+"...":t},showMore:function(){this.completeStoreList=!0},toStoreDetail:function(t){var e=t.id;e&&r["a"].openNewWebView({url:Object(d["d"])("/food-detail/".concat(e)),isFitWindow:!1})}}},m=f,g=(i("ef57"),i("2877")),v=Object(g["a"])(m,s,c,!1,null,"12c44c1a",null),h=v.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"district-old-brand"}},[i("div",{staticClass:"title"},[t._v("老字号餐饮")]),i("simpleList",{attrs:{list:t.list,smallBg:!0,reachBtm:t.reachBottom,isWaiting:t.isWaiting},on:{loadMore:t.getData}})],1)},b=[],w=i("6a02"),C=i("3f7c"),y={name:"district-old-brand",props:{categoryId:String},data:function(){return{list:[],start:0,isWaiting:!0,reachBottom:!1}},components:{simpleList:w["a"]},mixins:[l["a"],C["a"]],methods:{getData:function(){var t=this;this.isWaiting=!0,Object(u["b"])({vm:this}).then(function(e){var i={channel:1,city:4,language:7,categoryId:t.categoryId,offset:10,start:t.start,lat:e.gdLatitude,lon:e.gdLongitude};t.$axios.content.queryContentByOrganize(i).then(function(e){var i=e.code,n=e.data;if(0===+i){var a=n.result,r=n.totalRowNum;a.forEach(function(e){t.getImageList({item:e,width:180,height:180,clip:!0}),e.desc=e.address,e.distance=t.formatDistance(e.dis)}),t.start+=a.length,t.list=t.list.concat(a),t.reachBottom=t.list.length===r,t.isWaiting=!1}})})}},created:function(){this.getData()}},A=y,S=(i("659a"),i("47eb"),Object(g["a"])(A,p,b,!1,null,"19d718dc",null)),B=S.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"food-wrapper"}},[n("div",{staticClass:"title"},[t._v("特色美食")]),n("div",{staticClass:"list",attrs:{id:"food-list"}},t._l(t.foods,function(e,a){return n("div",{key:"food"+a,staticClass:"food-item",class:{last:a===t.foods.length-1},on:{click:function(i){return t.toFoodDetail(e)}}},[n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.photoUrl,expression:"food.photoUrl",arg:"background-image"}],staticClass:"food-item-img"}),n("div",{staticClass:"food-item-right"},[n("div",{staticClass:"food-item-title"},[t._v(t._s(e.name))]),n("div",{staticClass:"food-item-price"},[n("YellowStar",{staticClass:"food-item-star",attrs:{code:e.avgRating}}),n("div",{staticClass:"food-item-comment"},[t._v(t._s(e.comment))]),t._v("\n\t\t\t\t\t"+t._s(e.price))],1),n("div",{staticClass:"item-addr"},[n("img",{staticClass:"icon-location",attrs:{src:i("7b7b"),alt:""}}),t._v("距您"+t._s(e.distance)+" | "+t._s(e.address)+"\n\t\t\t\t")])])])}),0),n("loading",{attrs:{reachBtm:t.reachBtm,isWaiting:t.isWaiting},on:{loadMore:t.getFood}})],1)},x=[],I=i("8b3f"),_=i("2cab"),O={name:"district-special-food",props:{name:String},components:{YellowStar:_["a"],loading:I["a"]},mixins:[C["a"]],data:function(){return{foods:[],page:1,reachBtm:!1,isWaiting:!0}},methods:{getFood:function(){var t=this;this.isWaiting=!0,Object(u["b"])({vm:this}).then(function(e){var i={categoryName:"美食",page:t.page,city:t.name,size:10,lat:e.gdLatitude,lon:e.gdLongitude,direction:"asc"};t.$axios.food.getFoodList(i).then(function(e){var i=e.code,n=e.data;if(0===+i){var a=n.item,r=n.totalNum;a.forEach(function(e){var i=e.distance,n=e.avgPrice,a=e.ugcCount;e.distance=t.formatDistance(i),e.price=n&&+n?"￥".concat(+n,"/人"):"",a&&!isNaN(+a)&&(e.comment="".concat(+a,"条"))}),t.foods=t.foods.concat(a),t.reachBtm=t.foods.length===r,t.page++}t.isWaiting=!1})})},toFoodDetail:function(t){var e=t.businessUrl;e&&r["a"].openNewWebView({url:e,isFitWindow:!0})}},created:function(){this.getFood()}},k=O,M=(i("b747"),Object(g["a"])(k,L,x,!1,null,"37e76388",null)),j=M.exports,E={name:"district-food",data:function(){var t=null;o["a"]?t=o["a"]:(t=localStorage.getItem(o["b"]),t=JSON.parse(t));var e="http://hhh.images.visitshanghai.com.cn/app/newFoodTop.jpg?imageView2/1/w/750/h/330",i="14-16-3-3",n=e,a=[{name:"优惠餐厅",categoryId:i,imageUrl:e}],r="崇明区";if(t){var s=t,c=s.blocks;r=t.name,c.find(function(t){if("美食"===t.name)return a=t.children,!0})}return a.find(function(t){"头图"!==t.name&&t.categoryId||!t.imageUrl||(n=t.imageUrl)}),{defaultCategoryId:i,name:r,subTypes:a,bgUrl:n}},computed:{discountStoresId:function(){var t=this.defaultCategoryId;return this.subTypes.find(function(e){"优惠餐厅"===e.name&&(t=e.categoryId)}),t},oldBrandId:function(){var t="";return this.subTypes.find(function(e){"老字号餐饮"===e.name&&(t=e.categoryId)}),t},specialFoodName:function(){var t=this,e="";return this.subTypes.find(function(i){"特色美食"===i.name&&(e=t.name)}),e}},components:{discountStores:h,oldBrand:B,specialFood:j},created:function(){r["a"].setAppTitle({title:"美食"})},mounted:function(){this.removeHeight()},beforeDestroy:function(){this.resetHeight()}},N=E,U=(i("c177"),Object(g["a"])(N,n,a,!1,null,"274a7bbc",null));e["default"]=U.exports},f216:function(t,e,i){"use strict";i("28a5"),i("a481");var n=i("7618");e["a"]={filters:{discount:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"===Object(n["a"])(t)){var a=t;e=a.products,t=t.priceRate}if(t&&t<10)return"".concat(t,"折");if(i){if(e&&e.length>0){var r=e[0],o=r.id,s=r.discountsDesc;return o&&s?"优惠":""}return""}return""},price:function(t){if(t)return t.replace("人均 ","￥")},shortContent1:function(t){if(t){var e=t.split("；");return e.length>0?e[0]:void 0}},shortContent2:function(t){if(t){var e=t.split("；");return e.length>1?e[1]:void 0}}},methods:{discount:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"===Object(n["a"])(t)){var a=t;e=a.products,t=t.priceRate}if(t&&t<10)return"".concat(t,"折");if(i){if(e&&e.length>0){var r=e[0],o=r.id,s=r.discountsDesc;return o&&s?"优惠":""}return""}return""},shortContent1:function(t){if(t){var e=t.split("；");return e.length>0?e[0]:void 0}},shortContent2:function(t){if(t){var e=t.split("；");return e.length>1?e[1]:void 0}}}}},ffbe:function(t,e,i){"use strict";i.d(e,"b",function(){return a});i("7514");var n=i("49a2"),a={methods:{getVideoLink:function(t){var e=t.medias.find(function(t){return 2===+t.mediaType});return e?e.url:""}}};e["a"]={methods:{getImageList:function(t){var e=t.item,i=t.single,a=void 0===i||i,r=t.clip,o=void 0===r||r,s=t.width,c=t.height;if(a){var d=e.medias.find(function(t){return 1===+t.mediaType&&(e.imgUrl=e.url=o?Object(n["a"])(t.url,s,c):Object(n["c"])(t.url,s,c),!0)}),u=!!d;return u||console.warn("存在无图片条目",e),u}e.imageList=e.medias.filter(function(t){return 1===+t.mediaType&&(t.imgUrl=t.url=o?Object(n["a"])(t.url,s,c):Object(n["c"])(t.url,s,c),!0)});var l=e.imageList.length>0;return l||console.warn("存在无图片条目",e),l}}}}}]);