(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["districtSite"],{"0a49":function(t,i,n){var e=n("9b43"),r=n("626a"),a=n("4bf8"),c=n("9def"),s=n("cd1c");t.exports=function(t,i){var n=1==t,o=2==t,u=3==t,l=4==t,d=6==t,f=5==t||d,v=i||s;return function(i,s,g){for(var m,p,h=a(i),b=r(h),y=e(s,g,3),w=c(b.length),I=0,A=n?v(i,w):o?v(i,0):void 0;w>I;I++)if((f||I in b)&&(m=b[I],p=y(m,I,h),t))if(n)A[I]=p;else if(p)switch(t){case 3:return!0;case 5:return m;case 6:return I;case 2:A.push(m)}else if(l)return!1;return d?-1:u||l?l:A}}},1169:function(t,i,n){var e=n("2d95");t.exports=Array.isArray||function(t){return"Array"==e(t)}},"221f":function(t,i,n){"use strict";var e=n("b6e4"),r=n.n(e);r.a},"2f21":function(t,i,n){"use strict";var e=n("79e5");t.exports=function(t,i){return!!t&&e(function(){i?t.call(null,function(){},1):t.call(null)})}},3980:function(t,i,n){},"49a2":function(t,i,n){"use strict";n.d(i,"a",function(){return c}),n.d(i,"c",function(){return s});n("6762"),n("2fdb");var e=750,r=window.innerWidth*window.devicePixelRatio,a=r/e,c=function(t,i,n){if(!i)return t;var e=parseInt(i*a),r=0;n&&(r=parseInt(n*a));var c=t;return e&&(c=t.includes("?")?"".concat(t,"&imageView2/1/w/").concat(e):"".concat(t,"?imageView2/1/w/").concat(e)),r&&(c="".concat(c,"/h/").concat(r)),c},s=function(t,i,n){if(!i)return t;var e=parseInt(i*a),r=0;n&&(r=parseInt(n*a));var c=t;return e&&(c=t.includes("?")?"".concat(t,"&imageMogr2/thumbnail/").concat(e,"x"):"".concat(t,"?imageMogr2/thumbnail/").concat(e,"x")),r&&(c="".concat(c).concat(r)),c};i["b"]={methods:{clipImage:c,resizeImage:s}}},"55dd":function(t,i,n){"use strict";var e=n("5ca1"),r=n("d8e8"),a=n("4bf8"),c=n("79e5"),s=[].sort,o=[1,2,3];e(e.P+e.F*(c(function(){o.sort(void 0)})||!c(function(){o.sort(null)})||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),r(t))}})},6419:function(t,i,n){"use strict";var e=n("ac2d"),r=n("ed08");i["a"]={methods:{viewDetail:function(t){var i=t.id,n=t.dis;i&&e["a"].openNewWebView({url:Object(r["d"])("/list-detail/".concat(i,"?dis=").concat(n)),isFitWindow:!1})}}}},"68f8":function(t,i,n){"use strict";n.d(i,"b",function(){return s}),n.d(i,"a",function(){return o});n("55dd"),n("28a5"),n("7514"),n("6762"),n("2fdb");var e=n("ac2d"),r=n("90e9"),a=n("6419"),c=n("ed08"),s={methods:{goToSite:function(t){var i=t.lmmId,n=t.vrLink,r=t.jumpType,s=t.url;if(n){var o=!(1===+r);s.includes("http")||(s=Object(c["d"])(s)),e["a"].openNewWebView({url:s,isFitWindow:o})}else i?e["a"].openNewWebView({url:"https://www.yobab2b.com/h5/public/?userId=79076#/ticket/detail?productId=".concat(i,"&userId=79076"),isFitWindow:!0}):a["a"].methods.viewDetail(t)}}},o={methods:{getCatetoryInfo:function(t){var i=this;return new Promise(function(n){Object(r["b"])().then(function(n){var e=n.find(function(i){return+i.categoryId===t});i.allDistrictsData=n.filter(function(t){if(+t.parentId===e){var i=n.find(function(i){return+i.parentId===t.id&&"1"===i.categoryId.split("-").slice(-1)[0]}),r=n.find(function(i){return+i.parentId===t.id&&"2"===i.categoryId.split("-").slice(-1)[0]}),a=n.find(function(i){return+i.parentId===t.id&&"3"===i.categoryId.split("-").slice(-1)[0]}),c=n.find(function(i){return+i.parentId===t.id&&"4"===i.categoryId.split("-").slice(-1)[0]});if(t.detailId=i.categoryId,r&&(t.videoId=r.categoryId),a){var s=n.filter(function(t){return+t.parentId===+a.id});t.blocks=s}return c&&(t.activityId=c.categoryId),t.imageUrl=i.imageUrl,!0}return!1}),i.allDistrictsData.sort(function(t,i){return t.weight-i.weight})})})}}}},7514:function(t,i,n){"use strict";var e=n("5ca1"),r=n("0a49")(5),a="find",c=!0;a in[]&&Array(1)[a](function(){c=!1}),e(e.P+e.F*c,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"76ca":function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("culture-template",{ref:"wrapper",staticClass:"district-site",attrs:{bgUrl:t.bgUrl,isGoTop:!0}},[n("div",{attrs:{slot:"switch",id:"nav-wrapper"},slot:"switch"},t._l(t.navs,function(i,e){return n("div",{key:"nav"+e,staticClass:"nav-items",class:{active:t.activeNav===e},on:{click:function(i){return t.toggle(e)}}},[t._v("\n\t\t\t"+t._s(i)+"\n\t\t")])}),0),n("site-list",{attrs:{list:t.visibleList}})],1)},r=[],a=(n("ac6a"),n("7f7f"),n("7514"),n("a21f")),c=n("d6a0"),s=n("ffbe"),o=n("49a2"),u=n("fe54"),l=n("fa7a"),d=n("ac2d"),f={name:"district-site",mixins:[s["a"],s["b"],o["b"]],data:function(){var t=null;c["a"]?t=c["a"]:(t=localStorage.getItem(c["b"]),t=JSON.parse(t));var i="14-16-3-1",n="http://hhh.images.visitshanghai.com.cn/app/chongming-site.jpg",e=i,r=n;if(t){var a=t,s=a.blocks;s.find(function(t){if("景点"===t.name){e=t.categoryId;var i=t.children;return i&&i.length>0&&i.find(function(t){"头图"!==t.name&&t.categoryId||!t.imageUrl||(r=t.imageUrl)}),!0}})}var o=["全部","可购票"];return{bgUrl:r,categoryId:e,list:[],navs:o,activeNav:0}},components:{cultureTemplate:u["a"],siteList:l["a"]},computed:{visibleList:function(){return 0===this.activeNav?this.list:this.list.filter(function(t){return t.lmmId})}},methods:{getData:function(){var t=this;Object(a["b"])({vm:this}).then(function(i){var n={channel:1,city:4,language:7,categoryId:t.categoryId,topFlag:!0,offset:50,start:0,lat:i.gdLatitude,lon:i.gdLongitude};t.$axios.content.queryContentByOrganize(n).then(function(i){var n=i.code,e=i.data;if(0===+n){var r=e.result;r.forEach(function(i){i.cover?i.imgUrl=t.resizeImage(i.cover,690,280):t.getImageList({item:i,width:690,height:280}),i.lmmId=+i.simpleInfo.trim()}),t.isWaiting=!1,t.list=r}})})},toggle:function(t){var i=this;t!==this.activeNav&&(this.activeNav=t,this.$nextTick(function(){i.$refs.wrapper.changePosition()}))}},created:function(){this.getData(),d["a"].setAppTitle({title:"景点"})}},v=f,g=(n("f552"),n("221f"),n("2877")),m=Object(g["a"])(v,e,r,!1,null,"3bbb4f18",null);i["default"]=m.exports},"7b7b":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAYCAYAAAD3Va0xAAAB2UlEQVQ4jZWVucrCQBSFTwZ3cAFxRxAsBO0EG0W00jfwIX0EW5fCXqwUxN3CxgWx8ecMRCaZ5FcPRMZ7z/0cTzJqvF6vF2za7/dYLBY4HA643++yGQqFkE6nUSwWkclk7COwgC6XC4bDIXa7nWZUlc1m0Ww2EQ6HddDpdMJgMMDj8fgXYioQCKDT6SCZTMqK4Mv1ev0JQtHLGc6+QaPRyBXCbHi5wThLeRjoZrPRTPl8HvV6/Z0D85tMJliv1xYfZ8kQy+VSgxQKBXS7XUuYXLPGnl1kCN5qVUIINBoN12zYo0cVGeJ2u1mK0WgUwWDQFcQeParIEHa63+93hbh5yBDxeNxSPJ/PH0F2Dxkil8tZis/nE/P53BXCHj2qyBClUgkej8fSmE6nWK1WGoQ19lRxlgx5RMbjseMu+EmpVEquj8cjttut5imXy/J5kyA+of1+X9vyJ/l8PvR6PXnu5C3jolqt/gShOMNZmGeNqlQqSCQSX0Po5YypN8gwDLRaLS14J9FDL2c0EBWLxVCr1T6C6KFXlbCbuF2ng2mKPfUrOe7IFLcdiUS0OmvsOckR5PV65c8ob68prllj72sQxQza7bYMlBfX9lxUOf4dqZrNZvKtUy5vAfgDyR67rdYND+UAAAAASUVORK5CYII="},b6e4:function(t,i,n){},c217:function(t,i,n){"use strict";var e=n("cd6b"),r=n.n(e);r.a},cd1c:function(t,i,n){var e=n("e853");t.exports=function(t,i){return new(e(t))(i)}},cd6b:function(t,i,n){},d6a0:function(t,i,n){"use strict";n.d(i,"c",function(){return e}),n.d(i,"b",function(){return r}),n.d(i,"d",function(){return a}),n.d(i,"a",function(){return c}),n.d(i,"e",function(){return s});var e="district_search",r="district_active",a="district_video",c=null,s=function(t){c=t}},e853:function(t,i,n){var e=n("d3f4"),r=n("1169"),a=n("2b4c")("species");t.exports=function(t){var i;return r(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)||(i=void 0),e(i)&&(i=i[a],null===i&&(i=void 0))),void 0===i?Array:i}},f552:function(t,i,n){"use strict";var e=n("3980"),r=n.n(e);r.a},fa7a:function(t,i,n){"use strict";var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"site-list"}},[e("div",{attrs:{id:"list-wrapper"}},t._l(t.list,function(i){return e("div",{key:"site"+i.id,staticClass:"city-site-item",on:{click:function(n){return t.goToSite(i)}}},[e("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:i.imgUrl,expression:"item.imgUrl",arg:"background-image"}],staticClass:"city-site-bg"}),e("div",{staticClass:"city-site-btm"},[e("div",{staticClass:"city-site-name"},[t._v(t._s(i.title)+"\n\t\t\t\t\t"),i.lmmId?e("div",{staticClass:"city-site-ticket"},[t._v("可购票")]):t._e()]),i.customTags&&i.customTags.length>0?e("div",{staticClass:"row hiddenLine1"},t._l(i.customTags,function(i,n){return e("i",{key:n},[i?e("span",{staticClass:"span"},[t._v(t._s(i)+"\n\t\t\t\t\t")]):t._e()])}),0):t._e(),i.address?e("div",{staticClass:"city-site-location"},[e("img",{staticClass:"city-site-icon",attrs:{src:n("7b7b")}}),e("span",[t._v(t._s(i.address))])]):t._e()])])}),0),e("loading",{attrs:{reachBtm:t.reachBtm,isWaiting:t.isWaiting}})],1)},r=[],a=n("8b3f"),c=n("68f8"),s={name:"site-list",computed:{reachBtm:function(){return this.list.length>0},isWaiting:function(){return!this.reachBtm}},props:{list:Array},mixins:[c["b"]],components:{loading:a["a"]}},o=s,u=(n("c217"),n("2877")),l=Object(u["a"])(o,e,r,!1,null,"e4a6ce22",null);i["a"]=l.exports},ffbe:function(t,i,n){"use strict";n.d(i,"b",function(){return r});n("7514");var e=n("49a2"),r={methods:{getVideoLink:function(t){var i=t.medias.find(function(t){return 2===+t.mediaType});return i?i.url:""}}};i["a"]={methods:{getImageList:function(t){var i=t.item,n=t.single,r=void 0===n||n,a=t.clip,c=void 0===a||a,s=t.width,o=t.height;if(r){var u=i.medias.find(function(t){return 1===+t.mediaType&&(i.imgUrl=i.url=c?Object(e["a"])(t.url,s,o):Object(e["c"])(t.url,s,o),!0)}),l=!!u;return l||console.warn("存在无图片条目",i),l}i.imageList=i.medias.filter(function(t){return 1===+t.mediaType&&(t.imgUrl=t.url=c?Object(e["a"])(t.url,s,o):Object(e["c"])(t.url,s,o),!0)});var d=i.imageList.length>0;return d||console.warn("存在无图片条目",i),d}}}}}]);