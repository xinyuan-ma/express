(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fill-student-info"],{"0795":function(t,e,n){},"0825":function(t,e,n){"use strict";var i=n("0795"),a=n.n(i);a.a},1471:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"input-cls",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.inputValue},on:{blur:function(e){return t.inputShowClear(1)},focus:function(e){return t.inputShowClear(2)},input:[function(e){e.target.composing||(t.inputValue=e.target.value)},function(e){return t.inputChange(e,t.name)}]}}),t.isShowClear?n("i",{directives:[{name:"show",rawName:"v-show",value:t.showClear,expression:"showClear"}],staticClass:"clear iconfont iconicon_delete",on:{click:function(e){return t.clearInputValue(t.name)}}}):t._e()])},a=[],s=(n("a481"),{props:{isShowClear:{type:Boolean,default:!0},selectValue:{type:String},placeholder:{type:String,default:""},name:{type:String}},name:"InputComponent",data:function(){return{showClear:0,inputValue:""}},methods:{inputShowClear:function(t){var e=this,n=0;2===t?n=this.inputValue?1:0:this.$emit("inputBlur"),setTimeout(function(){e.showClear=n},10)},inputChange:function(t,e){var n=this,i=t.target.value.replace(/\s+/g,"");clearTimeout(this.timer),this.timer=setTimeout(function(){n.inputValue=i,n.showClear=i?1:0,n.$emit("inputHandler",{name:e,value:n.inputValue})},100)},clearInputValue:function(t){this.inputValue="",this.showClear=0,this.$emit("inputClearHandler",t)}}}),r=s,o=(n("0825"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"7904d7e8",null);e["a"]=c.exports},"27c1":function(t,e,n){},"2d5a":function(t,e,n){},4307:function(t,e,n){},"46eb":function(t,e,n){},"4a6a":function(t,e,n){},"4d05":function(t,e,n){t.exports=n.p+"img/wancheng.fa80a013.png"},"4e3c":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-group clearfix"},[t._l(t.btns,function(e,i){return[n("button",{key:i,staticClass:"submit-btn",class:{cancel:"default"==e.style,disabled:e.disabled},style:{"background-color":e.bgColor},on:{click:e.eventHandler}},[t._v("\n\t\t\t"+t._s(e.text)+"\n\t\t")])]})],2)},a=[],s={name:"index",data:function(){return{}},props:{btns:{type:Array,default:function(){return[]}}}},r=s,o=(n("6f9f"),n("2877")),c=Object(o["a"])(r,i,a,!1,null,"4180dcc7",null);e["a"]=c.exports},"672a":function(t,e,n){"use strict";var i=n("27c1"),a=n.n(i);a.a},"6f9f":function(t,e,n){"use strict";var i=n("4307"),a=n.n(i);a.a},"786c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"submit-result"},[n("Result",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type==1"}],attrs:{result:t.success}}),n("Result",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type==2"}],attrs:{result:t.fail}})],1)},a=[],s=n("ac2d"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},[n("div",{staticClass:"icon",style:{"background-image":"url("+t.result.icon+")"}}),n("div",{staticClass:"title"},[t._v(t._s(t.result.title))]),n("div",{staticClass:"description"},[t._v(t._s(t.result.desc))]),n("div",{staticClass:"submit-btn",on:{click:t.result.handler}},[t._v(t._s(t.result.btnText))])])},o=[],c={name:"result",props:{result:{type:Object,default:function(){return{}}}}},l=c,u=(n("a744"),n("2877")),p=Object(u["a"])(l,r,o,!1,null,"477b884c",null),d=p.exports,f={name:"submit-result",data:function(){var t=this;return{type:this.$route.params.type,success:{icon:n("4d05"),title:"验证成功",desc:"恭喜您完成了学生身份验证",btnText:"1"===this.$route.query.from?"返回":"继续购买",handler:function(){t.backToView("succ")}},fail:{icon:n("d42a"),title:"验证失败",desc:this.$route.query.msg,btnText:"关闭",handler:function(){t.backToView("fail")}}}},components:{Result:d},mounted:function(){s["a"].setAppTitle({title:"提交结果"})},methods:{backToView:function(t){s["a"].closeWebView()}}},m=f,h=(n("672a"),Object(u["a"])(m,i,a,!1,null,"5e349100",null));e["default"]=h.exports},"88d4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-form"},[n("tip",{attrs:{info:"为确保您的权益，请如实填写您的学生证信息"}}),n("div",{staticClass:"complete-user"},[n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("姓名")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入姓名",name:"userName"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)]),n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("身份证号")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入身份证号",name:"idCard"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)])]),n("div",{staticClass:"complete-user last"},[n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("学校")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入学校名称（仅限上海）",name:"university"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)]),n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("院系")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入院系",name:"college"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)]),n("div",{staticClass:"flex-w"},[n("p",{staticClass:"f-left"},[t._v("学号")]),n("p",{staticClass:"flex-1"},[n("n-input",{attrs:{placeholder:"请输入学号",name:"stuNo"},on:{inputHandler:t.inputHandler,inputBlur:t.inputBlur,inputClearHandler:t.inputClearHandler}})],1)])]),n("confirmDialog",{attrs:{visible:t.smsValidateVisible,title:"修改手机号",cancelText:"取消",confirmText:"确定修改"},on:{"update:visible":function(e){t.smsValidateVisible=e},cancel:t.cancel,confirm:t.confirm}},[n("div",{staticClass:"smsDialog",attrs:{slot:"body"},slot:"body"},[n("input",{attrs:{type:"text"}}),n("button",{staticClass:"smsCode",class:{active:t.smsActive},on:{click:t.sendSmsCode}},[t._v(t._s(t.smsText))])])]),n("popup",{ref:"popup",on:{onMask:t.onCancel}}),n("transition",{attrs:{name:"fade-down"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSchoolPicker,expression:"showSchoolPicker"}],staticClass:"school-picker"},[n("van-picker",{attrs:{"show-toolbar":"",title:"选择学校","confirm-button-text":"完成",columns:t.schools},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1)]),n("nButton",{attrs:{btns:t.buttons}})],1)},a=[],s=(n("ac6a"),n("456d"),n("7f7f"),n("ac2d")),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tip-box"},[n("div",{staticClass:"tip"},[t._v(t._s(t.info))])])},o=[],c={name:"tip-banner",props:{info:{type:String}}},l=c,u=(n("a8e0"),n("2877")),p=Object(u["a"])(l,r,o,!1,null,"f5852de8",null),d=p.exports,f=n("1471"),m=n("4e3c"),h=n("26e2"),v=n("ed08"),b=n("9d53"),C={name:"fill-student-info",data:function(){var t=this,e="实名认证填写页面",n="WH_Student_10006",i="提交实名认证",a="WH_Student_10007";return{trackName:e,trackCode:n,submitName:i,submitCode:a,buttons:[{text:"提交",disabled:!0,style:"primary",eventHandler:function(){t.submitInfo()}}],schools:["杭州","宁波","温州","嘉兴","湖州"],showSchoolPicker:!1,formData:{userName:"",idCard:"",university:"",college:"",stuNo:""},isActive:!1,smsValidateVisible:!1,smsText:"获取验证码",smsActive:!1}},components:{tip:d,nInput:f["a"],nButton:m["a"],popup:h["a"],confirmDialog:b["a"]},watch:{isActive:function(t){this.buttons[0].disabled=!t}},mounted:function(){s["a"].setAppTitle({title:"学生信息填写"}),this.trackEvent()},methods:{trackEvent:function(){var t=+this.$route.params.from,e=1===t?"完善信息":"抢购";this.$uweb.trackEvent(this.trackName+this.trackCode,"进入页面",e)},inputHandler:function(t){var e=this;this.formData[t.name]=t.value,this.isActive=Object.keys(this.formData).every(function(t){return!!e.formData[t]})},inputBlur:function(){document.querySelector("#app").scrollIntoView(!0)},inputClearHandler:function(t){this.formData[t]="",this.isActive=!1},submitInfo:function(){this.$uweb.trackEvent(this.submitName+this.submitCode,"提交");var t=Object(v["i"])(this.formData["idCard"]);if(t.msg===this.formData["idCard"]){var e=(new Date).getFullYear(),n=this.formData["idCard"].substr(6,4),i=e-n;i>=18&&i<=27?this.submitForm():this.$toast({content:"验证失败:学生年龄需18-27岁",duration:1500})}else this.$toast({content:t.msg,duration:1500})},submitForm:function(){var t=this;s["a"].showLoading(),this.$axios.member.studentIdentity(this.formData).then(function(e){t.$router.push("/submit-result/1?from=".concat(t.$route.params.from))}).catch(function(e){t.$router.push("/submit-result/2?from=".concat(t.$route.params.from,"&msg=").concat(e.msg))})},onConfirm:function(t,e){this.formData["university"]=t,this.showSchoolPicker=!1},onCancel:function(){this.showSchoolPicker=!1},openPicker:function(){this.showSchoolPicker=!0},openPicker1:function(){this.smsValidateVisible=!0},cancel:function(){this.smsValidateVisible=!1},confirm:function(){this.smsValidateVisible=!1},sendSmsCode:function(){var t,e=this,n=60;t=setInterval(function(){n--,n<=0?(clearInterval(t),e.smsText="重新发送",e.smsActive=!1):(e.smsText=n+"秒后重发",e.smsActive=!0)},1e3)}}},g=C,w=(n("a833"),Object(u["a"])(g,i,a,!1,null,"8324675c",null));e["default"]=w.exports},"9d53":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{visible:t.confirmDialog},on:{"update:visible":function(e){t.confirmDialog=e}}},[n("div",{staticClass:"metro-dialog",style:{"max-height":t.dialogH+"px"}},[n("div",{class:{"bus-logo":"bus"==t.type,"metro-logo":"metro"==t.type}}),n("div",{staticClass:"title"},[t._v(t._s(t.title))]),n("div",{staticClass:"box"},[t._t("body")],2),n("div",{staticClass:"we-modal-footer"},[t.cancelText?n("div",{staticClass:"we-modal-btn cancel",on:{click:t.cancel}},[t._v("\n\t\t\t\t"+t._s(t.cancelText)+"\n\t\t\t")]):t._e(),t.confirmText?n("div",{staticClass:"we-modal-btn",on:{click:t.confirm}},[t._v("\n\t\t\t\t"+t._s(t.confirmText)+"\n\t\t\t")]):t._e()])])])},a=[],s=n("90fe"),r={name:"index",data:function(){return{dialogH:Object(s["f"])().height-200,confirmDialog:!1}},props:{visible:{type:Boolean,default:!1},type:{type:String},title:{type:String},body:{type:String},cancelText:{type:String},confirmText:{type:String}},watch:{visible:function(t){this.confirmDialog=t},confirmDialog:function(t){this.$emit("update:visible",t)}},methods:{cancel:function(){this.confirmDialog=!1,this.type&&this.$emit("cancel",{type:this.type})},confirm:function(){this.confirmDialog=!1,this.type&&this.$emit("confirm",{type:this.type})}}},o=r,c=(n("ea88"),n("2877")),l=Object(c["a"])(o,i,a,!1,null,"1554b1e1",null);e["a"]=l.exports},a744:function(t,e,n){"use strict";var i=n("46eb"),a=n.n(i);a.a},a833:function(t,e,n){"use strict";var i=n("d138"),a=n.n(i);a.a},a8e0:function(t,e,n){"use strict";var i=n("4a6a"),a=n.n(i);a.a},d138:function(t,e,n){},d42a:function(t,e,n){t.exports=n.p+"img/wancheng_error.f8220665.png"},ea88:function(t,e,n){"use strict";var i=n("2d5a"),a=n.n(i);a.a},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"f",function(){return u}),n.d(e,"j",function(){return m}),n.d(e,"h",function(){return b}),n.d(e,"b",function(){return C}),n.d(e,"e",function(){return g}),n.d(e,"i",function(){return w});var i=n("f121"),a=n("f76d"),s=i["a"].ENV_URL,r=function(t){return"".concat(s,"/#").concat(t)},o=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function c(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function l(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var u={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},p=Object(a["a"])(),d="",f="";"iOS"===p?(d="https://itunes.apple.com/cn/app/id1395725438",f="saicpassenger://"):d="https://marketing.saicmobility.com/mis-h5/app-download";var m={appScheme:"saicpassenger://",downloadAppUrl:d,packageName:"com.saicmobility.user",otherAppPage:f},h="",v="";"iOS"===p?(h="https://apps.apple.com/cn/app/id732618720",v="shiminyun://"):h="http://m.eshimin.com/";var b={appScheme:"shiminyun://",downloadAppUrl:h,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:v},C=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],g=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],w=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=t.slice(0,17),a=t.slice(17,18);a=isNaN(parseInt(a))?a.toLowerCase():parseInt(a);for(var s=0,r=0;r<17;r++)s=(s+=parseInt(i.charAt(r))*n[r])%11;var o=[1,0,"X",9,8,7,6,5,4,3,2],c="X"===o[s]?o[s].toLowerCase():o[s];return a===c?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}}}]);