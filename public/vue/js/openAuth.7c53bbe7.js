(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["openAuth"],{1972:function(t,e,n){},"485a":function(t,e,n){"use strict";var a=n("1972"),o=n.n(a);o.a},"4d05":function(t,e,n){t.exports=n.p+"img/wancheng.fa80a013.png"},9269:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-openAuth"},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.showLoading,expression:"this.showLoading"}],staticClass:"open-loading"},[a("div",{staticClass:"loading-div"}),a("p",[t._v("开通授权中")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:this.showSuccess,expression:"this.showSuccess"}],staticClass:"open-success"},[a("img",{attrs:{src:n("4d05"),alt:""}}),a("p",[t._v("开通授权成功")]),a("div",{staticClass:"btn-box"},[a("button",{staticClass:"next-btn",on:{click:t.openUrl}},[t._v("返回")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:this.showError,expression:"this.showError"}],staticClass:"open-fail"},[a("img",{attrs:{src:n("d42a"),alt:""}}),a("p",[t._v("开通授权失败")]),a("div",{staticClass:"btn-box"},[a("button",{staticClass:"next-btn",on:{click:t.goBack}},[t._v("返回")])])])])},o=[],s=n("ac2d"),i=n("ed08"),r={name:"openAuth",data:function(){return{showLoading:!0,showSuccess:!1,showError:!1,timer:null,num:0,status:!1}},created:function(){},mounted:function(){s["a"].setAppTitle({title:"开通授权"}),s["a"].watchAppBackBtn(this.openUrl),this.nextStep()},methods:{nextStep:function(){var t=this,e={};this.$axios.metro.signQuery(e).then(function(e){var n=e.code,a=e.result;0===+n&&1*a.status===1&&1*a.agreeStatus===1?(t.showSuccess=!0,t.showLoading=!1):(t.showLoading=!1,t.showError=!0)}).catch(function(t){console.log(t)})},goBack:function(){s["a"].openNewWebView({url:Object(i["d"])("/openMetro"),isFitWindow:!0})},openUrl:function(){s["a"].openMetro(function(t){})}},beforeDestroy:function(){clearInterval(this.timer)}},c=r,p=(n("485a"),n("2877")),u=Object(p["a"])(c,a,o,!1,null,"1f5da006",null);e["default"]=u.exports},d42a:function(t,e,n){t.exports=n.p+"img/wancheng_error.f8220665.png"},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"g",function(){return c}),n.d(e,"c",function(){return p}),n.d(e,"f",function(){return u}),n.d(e,"j",function(){return m}),n.d(e,"h",function(){return g}),n.d(e,"b",function(){return v}),n.d(e,"e",function(){return b}),n.d(e,"i",function(){return A});var a=n("f121"),o=n("f76d"),s=a["a"].ENV_URL,i=function(t){return"".concat(s,"/#").concat(t)},r=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function c(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function p(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var u={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},d=Object(o["a"])(),h="",l="";"iOS"===d?(h="https://itunes.apple.com/cn/app/id1395725438",l="saicpassenger://"):h="https://marketing.saicmobility.com/mis-h5/app-download";var m={appScheme:"saicpassenger://",downloadAppUrl:h,packageName:"com.saicmobility.user",otherAppPage:l},f="",w="";"iOS"===d?(f="https://apps.apple.com/cn/app/id732618720",w="shiminyun://"):f="http://m.eshimin.com/";var g={appScheme:"shiminyun://",downloadAppUrl:f,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:w},v=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],b=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],A=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=t.slice(0,17),o=t.slice(17,18);o=isNaN(parseInt(o))?o.toLowerCase():parseInt(o);for(var s=0,i=0;i<17;i++)s=(s+=parseInt(a.charAt(i))*n[i])%11;var r=[1,0,"X",9,8,7,6,5,4,3,2],c="X"===r[s]?r[s].toLowerCase():r[s];return o===c?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}}}]);