(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["student-space"],{"1af6":function(t,e,n){var a=n("63b6");a(a.S,"Array",{isArray:n("9003")})},"20fd":function(t,e,n){"use strict";var a=n("d9f6"),i=n("aebd");t.exports=function(t,e,n){e in t?a.f(t,e,i(0,n)):t[e]=n}},"244d":function(t,e,n){"use strict";var a=n("d822"),i=n.n(a);i.a},"2d7a":function(t,e,n){"use strict";var a=n("3879"),i=n.n(a);i.a},"386b":function(t,e,n){var a=n("5ca1"),i=n("79e5"),r=n("be13"),s=/"/g,o=function(t,e,n,a){var i=String(r(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(a).replace(s,"&quot;")+'"'),o+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(o),a(a.P+a.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},3879:function(t,e,n){},4533:function(t,e,n){},"549b":function(t,e,n){"use strict";var a=n("d864"),i=n("63b6"),r=n("241e"),s=n("b0dc"),o=n("3702"),c=n("b447"),u=n("20fd"),l=n("7cd6");i(i.S+i.F*!n("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,p,d=r(t),f="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,v=0,y=l(d);if(m&&(g=a(g,h>2?arguments[2]:void 0,2)),void 0==y||f==Array&&o(y))for(e=c(d.length),n=new f(e);e>v;v++)u(n,v,m?g(d[v],v):d[v]);else for(p=y.call(d),n=new f;!(i=p.next()).done;v++)u(n,v,m?s(p,g,[i.value,v],!0):i.value);return n.length=v,n}})},"54a1":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("95d5")},"69f4":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"emptyInfo",class:{isbrand:t.isbrand},style:{backgroundColor:t.bgColor}},[a("img",{attrs:{src:n("8711")}}),a("div",{staticClass:"tips"},[t._v(t._s(t.isZH?"暂无信息":"No information"))])])},i=[],r=(n("6762"),n("2fdb"),{name:"noMessage",props:{bgColor:{type:String,default:"#fff"}},computed:{isbrand:function(){return this.$route.path.includes("brand")}}}),s=r,o=(n("244d"),n("2877")),c=Object(o["a"])(s,a,i,!1,null,"17b9f0b2",null);e["a"]=c.exports},7036:function(t,e,n){"use strict";var a=n("4533"),i=n.n(a);i.a},"75c4":function(t,e,n){"use strict";var a=n("973a"),i=n.n(a);i.a},"75fc":function(t,e,n){"use strict";var a=n("a745"),i=n.n(a);function r(t){if(i()(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var s=n("774e"),o=n.n(s),c=n("c8bb"),u=n.n(c);function l(t){if(u()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return o()(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function d(t){return r(t)||l(t)||p()}n.d(e,"a",function(){return d})},"774e":function(t,e,n){t.exports=n("d2d5")},"82e5":function(t,e,n){"use strict";var a=n("c4d9"),i=n.n(a);i.a},8711:function(t,e,n){t.exports=n.p+"img/no_message@3x.dace6754.png"},"95d5":function(t,e,n){var a=n("40c3"),i=n("5168")("iterator"),r=n("481b");t.exports=n("584a").isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||r.hasOwnProperty(a(e))}},"973a":function(t,e,n){},a745:function(t,e,n){t.exports=n("f410")},b54a:function(t,e,n){"use strict";n("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},c4d9:function(t,e,n){},c8bb:function(t,e,n){t.exports=n("54a1")},d2d5:function(t,e,n){n("1654"),n("549b"),t.exports=n("584a").Array.from},d822:function(t,e,n){},ec0d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"student-space"},[n("div",{staticClass:"header"},[t._isWeixin?t._e():[n("header",{style:t.paddingTop},[n("div",{staticClass:"header-center"},[n("i",{staticClass:"iconfont iconlist_left",on:{click:function(e){return e.stopPropagation(),t.closeWebView(e)}}}),n("h2",{staticClass:"title"},[t._v("学生专区")])])]),n("header",{staticClass:"fixed-box",style:t.paddingTop},[n("div",{staticClass:"header-center"},[n("i",{staticClass:"iconfont iconlist_left",on:{click:function(e){return e.stopPropagation(),t.closeWebView(e)}}}),n("h2",{staticClass:"title"},[t._v("学生专区")])])])]],2),n("div",{staticClass:"category-type-box"},[n("category-type",{staticClass:"swiper-self",on:{click:t.golist}})],1),n("div",{staticClass:"module"},[n("h4",{staticClass:"title"},[t._v("研学精选 "),n("span",{staticClass:"more",on:{click:function(e){return t.golist({link:"/research-tour"})}}},[t._v("查看全部"),n("i",{staticClass:"iconfont iconlist_right"})])]),n("research-tour")],1),n("discount-popup")],1)},i=[],r=(n("b54a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"type-list"},t._l(t.list,function(e,a){return n("div",{key:a,staticClass:"type",on:{click:function(n){return t.gourl(e)}}},[n("img",{staticClass:"icon",attrs:{src:e.imgurl,alt:""}}),n("p",{staticClass:"name"},[t._v(t._s(e.name))])])}),0)}),s=[],o=(n("7f7f"),n("f121")),c={data:function(){return{listData:[{name:"研学实践",imgurl:"http://hhh.images.visitshanghai.com.cn/student/type1.png",link:"/research-tour",trackCode:"WH_Student_10002"},{name:"参与建设",imgurl:"http://hhh.images.visitshanghai.com.cn/student/type2.png",link:"/feedback",trackCode:"WH_Student_10003"},{name:"专享特惠",imgurl:"http://hhh.images.visitshanghai.com.cn/student/type3.png",link:"".concat(o["a"].ENV_URL,"/act/choujiang/index/?activityCode=20191108031808"),trackCode:"WH_Student_10005",outside:!0,type:"discount"},{name:"服务专区",imgurl:"http://hhh.images.visitshanghai.com.cn/student/type4.png",link:"http://jsby.h5yunban.com/shjy-jydt/index.php",outside:!0,trackCode:"WH_Student_10009",WXHidden:!0}]}},computed:{list:function(){return this._isWeChat?this.listData.filter(function(t){return!t.WXHidden}):this.listData}},methods:{gourl:function(t){t.noService||(this.$uweb.trackEvent(t.name+t.trackCode,"点击"),this.$emit("click",t))}}},u=c,l=(n("2d7a"),n("2877")),p=Object(l["a"])(u,r,s,!1,null,"561218d3",null),d=p.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"research-tour"},[t._l(t.listdata,function(e){return n("div",{key:e.id,staticClass:"item",on:{click:function(n){return t.goDetail(e)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.selfCover,expression:"item.selfCover"}],staticClass:"bg-img",attrs:{alt:""}}),n("div",{staticClass:"content"},[n("h5",{staticClass:"up"},[n("p",{staticClass:"name hiddenLine1"},[t._v(t._s(e.title))]),e.custerPrice?n("p",[n("span",{staticClass:"price"},[t._v(t._s(e.custerPrice))])]):t._e()]),"单项课程"===e.organizeName?n("span",{staticClass:"type one-day"},[t._v(t._s(e.organizeName))]):t._e(),"一日研学"===e.organizeName?n("span",{staticClass:"type research"},[t._v(t._s(e.organizeName))]):t._e()])])}),n("no-message",{directives:[{name:"show",rawName:"v-show",value:t.noMessage&&!t.listdata.length,expression:"noMessage && !listdata.length"}],attrs:{bgColor:"transparent"}})],2)},h=[],g=(n("28a5"),n("a481"),n("75fc")),m=(n("96cf"),n("3b8d")),v=n("69f4"),y=n("ac2d"),b=n("ed08"),w=n("1b62"),k={mixins:[w["a"]],data:function(){return{location:{lat:"31.219452",lon:"121.459510"},noMessage:!1,startNum:0,listdata:[],business:[{title:"一日研学",categoryId:"c1-1"},{title:"单项课程",categoryId:"c1-2"}]}},components:{NoMessage:v["a"]},methods:{getlist:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.noMessage=!1,t.next=3,this.getListData("c1-1");case 3:return e=t.sent,t.next=6,this.getListData("c1-2");case 6:n=t.sent,this.noMessage=!0,this.listdata=[].concat(Object(g["a"])(e),Object(g["a"])(n));case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getListData:function(t){var e=this;return new Promise(function(n,a){var i={categoryId:t,offset:2,start:0,lat:e.location.lat,lon:e.location.lon,topFlag:!0};e.$axios.content.queryContentByOrganize(i,{showLoading:e.isloading}).then(function(t){if(t.data&&t.data.result&&t.data.result.length){var a=t.data.result.map(function(t){return t.selfCover=t.cover?e.imgCover(t.cover,690,280):"",t});n(a)}else{var i=[];n(i)}}).catch(function(t){var e=[];n(e)})})},isOutlineLink:function(t){var e=t.replace(/\s*/g,""),n=e.split("："),a="驴妈妈一日研学";return n[0]===a?n[1]:""},goDetail:function(t){var e=this.isOutlineLink(t.simpleInfo);if(e){var n="https://m.lvmama.com/vacations/m/tour/".concat(e,"?lang=chn");y["a"].openNewWebView({url:n,isFitWindow:!1})}else y["a"].openNewWebView({url:Object(b["d"])("/list-detail/".concat(t.id,"?type=yanxuezixun")),isFitWindow:!1})}},created:function(){this.getlist()}},C=k,x=(n("7036"),Object(l["a"])(C,f,h,!1,null,"1a4f542c",null)),_=x.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup",{ref:"popup"},[n("div",{staticClass:"coupon"},[n("div",{staticClass:"btn",on:{click:t.toActivity}})]),n("div",{staticClass:"close"},[n("img",{attrs:{src:"http://hhh.images.visitshanghai.com.cn/close.png",alt:""},on:{click:t.close}})])])},I=[],N=n("26e2"),W={data:function(){return{link:"/act/choujiang/index/?activityCode=20191108031808",token:"",userId:""}},components:{Popup:N["a"]},mounted:function(){var t=this;y["a"].noCallAppLoginGetInfo(function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t._isWeixin||!a){e.next=5;break}return e.next=3,t.getUserByToken(a);case 3:e.next=6;break;case 5:t.token=a;case 6:n&&(t.userId=n.userId),t.show(t.token);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),y["a"].refreshPage(function(){y["a"].noCallAppLoginGetInfo(function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t._isWeixin||!a){e.next=5;break}return e.next=3,t.getUserByToken(a);case 3:e.next=6;break;case 5:t.token=a;case 6:n&&(t.userId=n.userId),t.show(t.token);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())})},methods:{getUserByToken:function(t){var e=this;return new Promise(function(n,a){var i={token:t};e.$axios.activity.getUserByToken(i,{doNotPullUpLogin:!0}).then(function(a){e.token=t,n()}).catch(function(t){e.token="",n()})})},toActivity:function(){this.$uweb.trackEvent("初冬有礼，学生专享大转盘弹框stu-shdx-shouye-chudongyouli","点击");var t="".concat(o["a"].ENV_URL).concat(this.link);this._isWeixin&&(t="".concat(t,"&userId=").concat(this.userId,"&token=").concat(this.token)),y["a"].openNewWebView({url:t,isFitWindow:!0}),this.close()},getMemCacheKeyValue:function(){return new Promise(function(t,e){try{y["a"].getMemCacheKeyValue({keyName:"xueshengzuanquCJ"},function(e){t(e.result.valueContent)})}catch(n){t("")}})},show:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getMemCacheKeyValue();case 2:if(n=t.sent,"1"!==n){t.next=9;break}if(!e){t.next=8;break}return t.abrupt("return");case 8:y["a"].setMemCacheKeyValue({keyName:"xueshengzuanquCJ",valueContent:""},function(t){});case 9:e&&y["a"].setMemCacheKeyValue({keyName:"xueshengzuanquCJ",valueContent:"1"},function(t){console.log("setMemCacheKeyValue",t)}),this.$refs.popup.showMask();case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),close:function(){this.$refs.popup.hideMask()}}},j=W,O=(n("82e5"),Object(l["a"])(j,A,I,!1,null,"716b8fd6",null)),S=O.exports,M={data:function(){return{paddingTop:{},token:"",userId:""}},created:function(){var t=this;this._isApp&&this.getClientInfo().then(function(e){var n=e.statusBarH;t._isiOS&&n<25&&(n=25),t.paddingTop={paddingTop:"".concat(n,"px")}}),this._isWeixin&&(y["a"].noCallAppLoginGetInfo(function(e,n){t.token=n,e&&(t.userId=e.userId)}),y["a"].refreshPage(function(){y["a"].noCallAppLoginGetInfo(function(e,n){t.token=n,e&&(t.userId=e.userId)})}))},mounted:function(){if(!this._isWeixin){var t=document.querySelector(".student-space"),e=document.querySelector(".fixed-box"),n=e.offsetHeight;t.addEventListener("scroll",function(){var a=t.scrollTop;e.style.opacity=a>n?1:a/n})}},methods:{closeWebView:function(){y["a"].closeWebView()},golist:function(t){if(t.outside){var e=t.link;return"discount"===t.type&&this._isWeixin&&(e="".concat(e,"&userId=").concat(this.userId,"&token=").concat(this.token)),void y["a"].openNewWebView({url:e,isFitWindow:!0})}y["a"].openNewWebView({url:Object(b["d"])(t.link),isFitWindow:!0})}},components:{CategoryType:d,ResearchTour:_,DiscountPopup:S}},P=M,L=(n("75c4"),Object(l["a"])(P,a,i,!1,null,"55db750f",null));e["default"]=L.exports},ed08:function(t,e,n){"use strict";n.d(e,"d",function(){return s}),n.d(e,"a",function(){return o}),n.d(e,"g",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"f",function(){return l}),n.d(e,"j",function(){return h}),n.d(e,"h",function(){return v}),n.d(e,"b",function(){return y}),n.d(e,"e",function(){return b}),n.d(e,"i",function(){return w});var a=n("f121"),i=n("f76d"),r=a["a"].ENV_URL,s=function(t){return"".concat(r,"/#").concat(t)},o=function(){return new Promise(function(t,e){if(window.AMap)t(window.AMap);else{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="http://webapi.amap.com/maps?v=1.4.14&callback=initAMap&key=555c914c29cb33d914437914f1b79b49",n.onerror=e,document.head.appendChild(n)}window.initAMap=function(){t(window.AMap)}})};function c(t,e){"string"===typeof e?localStorage.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}function u(t){var e=localStorage.getItem(t);if("string"===typeof e)try{return JSON.parse(e)}catch(n){return e}}var l={appScheme:"metro://",downloadAppUrl:"http://anijue.bangdao-tech.com/p/q/jhbvw8xg/pages/share/index.html",packageName:"com.app.shanghai.metro",otherAppPage:"metro://qrcode"},p=Object(i["a"])(),d="",f="";"iOS"===p?(d="https://itunes.apple.com/cn/app/id1395725438",f="saicpassenger://"):d="https://marketing.saicmobility.com/mis-h5/app-download";var h={appScheme:"saicpassenger://",downloadAppUrl:d,packageName:"com.saicmobility.user",otherAppPage:f},g="",m="";"iOS"===p?(g="https://apps.apple.com/cn/app/id732618720",m="shiminyun://"):g="http://m.eshimin.com/";var v={appScheme:"shiminyun://",downloadAppUrl:g,packageName:"mobi.w3studio.apps.android.shsmy.phone",otherAppPage:m},y=["1、打开微信“乘车码”小程序，点击“开通乘车码”","2、选择优先扣费方式，并开通免密支付","3、开通成功后，日常使用“游上海”APP公交乘车码即可快捷乘车"],b=["1、下载Metro大都会App，并注册登录",'2、进入底部菜单栏"乘车"页面后，点击 “立即开通”(需要打开蓝牙)',"3、开通成功后，日常使用游上海App地铁乘车码即可快捷乘车"],w=function(t){t="string"===typeof t?t:String(t);var e=/^[\d]{17}[0-9|X|x]{1}$/;if(e.test(t)){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],a=t.slice(0,17),i=t.slice(17,18);i=isNaN(parseInt(i))?i.toLowerCase():parseInt(i);for(var r=0,s=0;s<17;s++)r=(r+=parseInt(a.charAt(s))*n[s])%11;var o=[1,0,"X",9,8,7,6,5,4,3,2],c="X"===o[r]?o[r].toLowerCase():o[r];return i===c?{code:0,msg:t}:{code:0,msg:"你输入的身份证号码格式不对!"}}return{code:0,msg:"你输入的身份证号码格式不对,请重新输入!"}}},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);